<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Heike Hofmann, Craig Orman, Naga Vempati">

<title>Scan Quality Assessor: Model Comparison</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="Model Comparison_files/libs/clipboard/clipboard.min.js"></script>
<script src="Model Comparison_files/libs/quarto-html/quarto.js"></script>
<script src="Model Comparison_files/libs/quarto-html/popper.min.js"></script>
<script src="Model Comparison_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Model Comparison_files/libs/quarto-html/anchor.min.js"></script>
<link href="Model Comparison_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Model Comparison_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Model Comparison_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Model Comparison_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Model Comparison_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#feature-analysis" id="toc-feature-analysis" class="nav-link" data-scroll-target="#feature-analysis">Feature Analysis</a>
  <ul class="collapse">
  <li><a href="#assess-percentile-na-proportion" id="toc-assess-percentile-na-proportion" class="nav-link" data-scroll-target="#assess-percentile-na-proportion">Assess Percentile NA Proportion</a></li>
  <li><a href="#assess-col-na" id="toc-assess-col-na" class="nav-link" data-scroll-target="#assess-col-na">Assess Col NA</a></li>
  <li><a href="#extract-na" id="toc-extract-na" class="nav-link" data-scroll-target="#extract-na">Extract NA</a></li>
  <li><a href="#assess-middle-na-proportion" id="toc-assess-middle-na-proportion" class="nav-link" data-scroll-target="#assess-middle-na-proportion">Assess Middle NA Proportion</a></li>
  <li><a href="#assess-rotation" id="toc-assess-rotation" class="nav-link" data-scroll-target="#assess-rotation">Assess Rotation</a></li>
  <li><a href="#assess-bottomempty" id="toc-assess-bottomempty" class="nav-link" data-scroll-target="#assess-bottomempty">Assess Bottomempty</a></li>
  <li><a href="#assess-median-na-proportion" id="toc-assess-median-na-proportion" class="nav-link" data-scroll-target="#assess-median-na-proportion">Assess Median NA Proportion</a></li>
  <li><a href="#cross-correlations" id="toc-cross-correlations" class="nav-link" data-scroll-target="#cross-correlations">Cross Correlations</a></li>
  </ul></li>
  <li><a href="#model-analysis" id="toc-model-analysis" class="nav-link" data-scroll-target="#model-analysis">Model Analysis</a>
  <ul class="collapse">
  <li><a href="#standard-ordinal-logistic-regression" id="toc-standard-ordinal-logistic-regression" class="nav-link" data-scroll-target="#standard-ordinal-logistic-regression">Standard Ordinal Logistic Regression</a></li>
  <li><a href="#standard-numerical-regression" id="toc-standard-numerical-regression" class="nav-link" data-scroll-target="#standard-numerical-regression">Standard Numerical regression</a></li>
  <li><a href="#standard-ordinal-random-forest" id="toc-standard-ordinal-random-forest" class="nav-link" data-scroll-target="#standard-ordinal-random-forest">Standard Ordinal random forest</a></li>
  <li><a href="#standard-numerical-random-forest" id="toc-standard-numerical-random-forest" class="nav-link" data-scroll-target="#standard-numerical-random-forest">Standard Numerical Random Forest</a></li>
  </ul></li>
  <li><a href="#cropped-feature-analysis" id="toc-cropped-feature-analysis" class="nav-link" data-scroll-target="#cropped-feature-analysis">Cropped Feature Analysis</a>
  <ul class="collapse">
  <li><a href="#extract-na-cropped" id="toc-extract-na-cropped" class="nav-link" data-scroll-target="#extract-na-cropped">Extract NA Cropped</a></li>
  <li><a href="#assess-bottomempty-cropped" id="toc-assess-bottomempty-cropped" class="nav-link" data-scroll-target="#assess-bottomempty-cropped">Assess Bottomempty Cropped</a></li>
  <li><a href="#assess-col-na-cropped" id="toc-assess-col-na-cropped" class="nav-link" data-scroll-target="#assess-col-na-cropped">Assess Col NA Cropped</a></li>
  <li><a href="#assess-median-na-proportion-cropped" id="toc-assess-median-na-proportion-cropped" class="nav-link" data-scroll-target="#assess-median-na-proportion-cropped">Assess Median NA Proportion Cropped</a></li>
  </ul></li>
  <li><a href="#cropped-model-analysis" id="toc-cropped-model-analysis" class="nav-link" data-scroll-target="#cropped-model-analysis">Cropped Model Analysis</a>
  <ul class="collapse">
  <li><a href="#cropped-ordinal-logistic-regression" id="toc-cropped-ordinal-logistic-regression" class="nav-link" data-scroll-target="#cropped-ordinal-logistic-regression">Cropped Ordinal Logistic Regression</a></li>
  <li><a href="#cropped-numerical-logistic-regression" id="toc-cropped-numerical-logistic-regression" class="nav-link" data-scroll-target="#cropped-numerical-logistic-regression">Cropped Numerical Logistic Regression</a></li>
  <li><a href="#cropped-ordinal-random-forest" id="toc-cropped-ordinal-random-forest" class="nav-link" data-scroll-target="#cropped-ordinal-random-forest">Cropped Ordinal Random Forest</a></li>
  <li><a href="#cropped-numerical-random-forest" id="toc-cropped-numerical-random-forest" class="nav-link" data-scroll-target="#cropped-numerical-random-forest">Cropped Numerical Random Forest</a></li>
  </ul></li>
  <li><a href="#followup-scans" id="toc-followup-scans" class="nav-link" data-scroll-target="#followup-scans">Followup Scans</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Scan Quality Assessor: Model Comparison</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Heike Hofmann, Craig Orman, Naga Vempati </p>
          </div>
  </div>
    
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This document will give well commented exact technical details to show the comparison of various models we tested and compared to determine the best candidate for use in a production environment.</p>
<p>We will investigate the ability of our features to predict the quality of a scan using a variety of methods. It should be noted that given our current classification system Good &gt; Tiny Problems &gt; Problematic &gt; Bad &gt; Yikes, we will consider that any scan worse than Tiny Problems should be re-scanned by the user. However, this is a tool meant to aid a user in deciding and is not to be taken as a sole source of truth.</p>
<p>Models will be broken into two classification types, ordinal and binary. In the ordinal models, we will try to accurately predict which of the five categories a scan falls into. As quality is a subjective rating, we will focus more on being within one step of the assigned rating than going for perfect agree, although perfect agreement would be optimal. In the binary setting, we will group the scans as Good (1) and Bad (0) as binary classifications are often easier. Good (1) scans will be scans currently labelled as Good or Tiny Problems, with Bad (0) scans being Problematic, Bad, and Yikes.</p>
<ul>
<li><span style="color: red;">Is there a more mathy and rigorous reason we chose these models? They are pretty much just my go-tos, and the only ones I know for categorical</span></li>
</ul>
<p>XXX results first introduction to save people time</p>
<p>The models we will train are logistic regressions, and random forests. These models have often proven to be sufficiently explainable for forensic purposes, as well as statistically sound in many environments.</p>
<p>Data handling and type setting</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-2_48b6a080ef3d9320b559a79e570a84ed">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>full.data <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"../data/std_and_cropped_data_12_20_2022.csv"</span>, <span class="at">sep=</span><span class="st">","</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>full.data <span class="ot">&lt;-</span> full.data <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Quality =</span> <span class="fu">factor</span>(Quality, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Good"</span>, <span class="st">"Tiny Problems"</span>, <span class="st">"Problematic"</span>, <span class="st">"Bad"</span>, <span class="st">"Yikes"</span>), <span class="at">ordered =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Problem =</span> <span class="fu">factor</span>(Problem, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Good"</span>, <span class="st">"Damage"</span>, <span class="st">"Holes"</span>, <span class="st">"Feathering"</span>, <span class="st">"Rotation-Staging"</span>), <span class="at">ordered =</span> <span class="cn">FALSE</span>),</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">GoodScan =</span> Quality <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Good"</span>, <span class="st">"Tiny Problems"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">LAPD_id =</span> <span class="fu">sprintf</span>(<span class="st">"FAU%3d-B%s-L%d"</span>,FAU, Bullet, Land),</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># This is the features ran against the full image</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_percentile_na_proportion =</span> <span class="fu">as.numeric</span>(assess_percentile_na_proportion),</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_col_na =</span> <span class="fu">as.numeric</span>(assess_col_na),</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">extract_na =</span> <span class="fu">as.numeric</span>(extract_na),</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_middle_na_proportion =</span> <span class="fu">as.numeric</span>(assess_middle_na_proportion),</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_rotation =</span> <span class="fu">as.numeric</span>(assess_rotation),</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_bottomempty =</span> <span class="fu">as.numeric</span>(assess_bottomempty),</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_median_na_proportion =</span> <span class="fu">as.numeric</span>(assess_median_na_proportion),</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># This is the features ran against the cropped image</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_percentile_na_proportion_cropped =</span> <span class="fu">as.numeric</span>(assess_percentile_na_proportion_cropped),</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_col_na_cropped =</span> <span class="fu">as.numeric</span>(assess_col_na_cropped),</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">extract_na_cropped =</span> <span class="fu">as.numeric</span>(extract_na_cropped),</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_bottomempty_cropped =</span> <span class="fu">as.numeric</span>(assess_bottomempty_cropped),</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_median_na_proportion_cropped =</span> <span class="fu">as.numeric</span>(assess_median_na_proportion_cropped)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>followupScans <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="feature-analysis" class="level2">
<h2 class="anchored" data-anchor-id="feature-analysis">Feature Analysis</h2>
<p>In this investigation, we are going to look at the features calculated against the full image. This investigation will tell us more about the predictive power of each feature, and tell us how different the quality categories are from each other.</p>
<p>XXX Upfront table of the results</p>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th>Ord Log</th>
<th>Num Log</th>
<th>Ord For</th>
<th>Num For</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TPR</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>TNR</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>XXX Our results are mostly in graphical form. Should I use some kinda test?</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-3_81ffc120e5167a9b290f5bede3c86b4d">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>standard.data <span class="ot">&lt;-</span> full.data[,<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span> <span class="sc">&amp;</span> <span class="dv">18</span><span class="sc">:</span><span class="dv">19</span>]</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(standard.data[,<span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Problem
Quality         Good Damage Holes Feathering Rotation-Staging
  Good           253      0     0          0                0
  Tiny Problems    0      1   991         61                6
  Problematic      0      3    10        235               15
  Bad              0     64     0        179               10
  Yikes            0      1     1         18                2</code></pre>
</div>
</div>
<section id="assess-percentile-na-proportion" class="level3">
<h3 class="anchored" data-anchor-id="assess-percentile-na-proportion">Assess Percentile NA Proportion</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-4_7e60f6302f0a17817de9b65862596023">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(standard.data<span class="sc">$</span>assess_percentile_na_proportion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
0.00000 0.00331 0.01088 0.02073 0.02716 0.25525 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(standard.data, <span class="fu">aes</span>(<span class="at">x=</span>Quality, <span class="at">y=</span>assess_percentile_na_proportion)) <span class="sc">+</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Assess Percentile NA Proportion by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">glm</span>(Quality <span class="sc">~</span> assess_percentile_na_proportion,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>standard.data, <span class="at">family=</span><span class="st">"binomial"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = Quality ~ assess_percentile_na_proportion, family = "binomial", 
    data = standard.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-4.0868   0.0000   0.0104   0.2550   1.4413  

Coefficients:
                                Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                      -0.6017     0.1206  -4.991 6.02e-07 ***
assess_percentile_na_proportion 585.1354    45.1784  12.952  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1476.42  on 1849  degrees of freedom
Residual deviance:  782.01  on 1848  degrees of freedom
AIC: 786.01

Number of Fisher Scoring iterations: 10</code></pre>
</div>
</div>
<p>In the boxplot we can see that as Assess Percentile NA Proportion increases, the quality of the image decreases. The IQR of the quality categories has overlap, but the medians are consistently different in the chart. The logistic regression also shows that there is overwhelming evidence, with reservation, for this being a useful feature in explaining the quality.</p>
</section>
<section id="assess-col-na" class="level3">
<h3 class="anchored" data-anchor-id="assess-col-na">Assess Col NA</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-5_15ffea89a7f466d70098e20bebe5dd64">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(standard.data<span class="sc">$</span>assess_col_na)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 0.2573  0.9244  1.0755  1.1654  1.2928  4.3684 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(standard.data, <span class="fu">aes</span>(<span class="at">x=</span>Quality, <span class="at">y=</span>assess_col_na)) <span class="sc">+</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Assess Col NA by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">glm</span>(Quality <span class="sc">~</span> assess_col_na,</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>standard.data, <span class="at">family=</span><span class="st">"binomial"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = Quality ~ assess_col_na, family = "binomial", data = standard.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.3488   0.1629   0.4009   0.5954   1.8298  

Coefficients:
              Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)    -2.5752     0.3593  -7.167 7.66e-13 ***
assess_col_na   4.3089     0.3727  11.563  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1476.4  on 1849  degrees of freedom
Residual deviance: 1269.5  on 1848  degrees of freedom
AIC: 1273.5

Number of Fisher Scoring iterations: 6</code></pre>
</div>
</div>
<p>In the boxplot we can see that as Assess Col NA increases, the quality of the image decreases. The IQR of the quality categories has overlap, but the medians are consistently different in the chart, with the exception of “Good” and “Tiny Problems” which are very similar. The logistic regression also shows that there is overwhelming evidence for this being a useful feature in explaining the quality.</p>
</section>
<section id="extract-na" class="level3">
<h3 class="anchored" data-anchor-id="extract-na">Extract NA</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-6_3fd68afd4010b2a5724e56a2fe1553b7">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(standard.data<span class="sc">$</span>extract_na)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  3.667  12.797  15.082  15.915  18.303  48.454 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(standard.data, <span class="fu">aes</span>(<span class="at">x=</span>Quality, <span class="at">y=</span>extract_na)) <span class="sc">+</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Extract NA by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">glm</span>(Quality <span class="sc">~</span> extract_na,</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>standard.data, <span class="at">family=</span><span class="st">"binomial"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = Quality ~ extract_na, family = "binomial", data = standard.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.6889   0.1483   0.3688   0.5775   1.9821  

Coefficients:
            Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept) -3.09877    0.36353  -8.524   &lt;2e-16 ***
extract_na   0.35060    0.02753  12.736   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1476.4  on 1849  degrees of freedom
Residual deviance: 1226.7  on 1848  degrees of freedom
AIC: 1230.7

Number of Fisher Scoring iterations: 6</code></pre>
</div>
</div>
<p>In the boxplot we can see that as Extract NA increases, the quality of the image decreases. The IQR of the quality categories has overlap, but the medians are consistently different in the chart. The logistic regression also shows that there is overwhelming evidence for this being a useful feature in explaining the quality.</p>
</section>
<section id="assess-middle-na-proportion" class="level3">
<h3 class="anchored" data-anchor-id="assess-middle-na-proportion">Assess Middle NA Proportion</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-7_90032a339edcf34a472a2c2e7a256f9c">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(standard.data<span class="sc">$</span>assess_middle_na_proportion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
0.0002776 0.0221251 0.0392280 0.0517308 0.0688228 0.3851669 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(standard.data, <span class="fu">aes</span>(<span class="at">x=</span>Quality, <span class="at">y=</span>assess_middle_na_proportion)) <span class="sc">+</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Assess Middle NA Proportion by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">glm</span>(Quality <span class="sc">~</span> assess_middle_na_proportion,</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>standard.data, <span class="at">family=</span><span class="st">"binomial"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = Quality ~ assess_middle_na_proportion, family = "binomial", 
    data = standard.data)

Deviance Residuals: 
     Min        1Q    Median        3Q       Max  
-2.72629   0.03616   0.24091   0.58568   1.34175  

Coefficients:
                            Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                  -0.4164     0.1454  -2.864  0.00419 ** 
assess_middle_na_proportion  73.9873     5.7409  12.888  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1476.4  on 1849  degrees of freedom
Residual deviance: 1115.6  on 1848  degrees of freedom
AIC: 1119.6

Number of Fisher Scoring iterations: 7</code></pre>
</div>
</div>
<p>In the boxplot we can see that as Extract NA increases, the quality of the image decreases. The IQR of the quality categories has overlap, but the medians are consistently different in the chart. The logistic regression also shows that there is overwhelming evidence for this being a useful feature in explaining the quality.</p>
</section>
<section id="assess-rotation" class="level3">
<h3 class="anchored" data-anchor-id="assess-rotation">Assess Rotation</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-8_39945ec1487ba61ea373cc87ae523e8e">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(standard.data<span class="sc">$</span>assess_rotation)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 0.0000  0.3143  0.6904  1.0279  1.4601  4.9878 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(standard.data, <span class="fu">aes</span>(<span class="at">x=</span>Quality, <span class="at">y=</span>assess_rotation)) <span class="sc">+</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Assess Rotation by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">glm</span>(Quality <span class="sc">~</span> assess_rotation,</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>standard.data, <span class="at">family=</span><span class="st">"binomial"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = Quality ~ assess_rotation, family = "binomial", 
    data = standard.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.0678   0.5270   0.5443   0.5507   0.5555  

Coefficients:
                Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)      1.79066    0.09775  18.319   &lt;2e-16 ***
assess_rotation  0.05131    0.07105   0.722     0.47    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1476.4  on 1849  degrees of freedom
Residual deviance: 1475.9  on 1848  degrees of freedom
AIC: 1479.9

Number of Fisher Scoring iterations: 4</code></pre>
</div>
</div>
<p>In the boxplot, we see that there is no significant visual difference in median or IQR of Assess Rotation when grouped by Quality. The logistic regression shows no evidence that this feature can help explain the quality of an image. This feature was primarily intended for use in predicting a particular problem that occurs in scans.</p>
</section>
<section id="assess-bottomempty" class="level3">
<h3 class="anchored" data-anchor-id="assess-bottomempty">Assess Bottomempty</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-9_500b684412f477c0c904c313e77eae46">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(standard.data<span class="sc">$</span>assess_bottomempty)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  8.516  22.669  27.540  29.903  34.634  95.394 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(standard.data, <span class="fu">aes</span>(<span class="at">x=</span>Quality, <span class="at">y=</span>assess_bottomempty)) <span class="sc">+</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Assess Bottomempty by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">glm</span>(Quality <span class="sc">~</span> assess_bottomempty,</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>standard.data, <span class="at">family=</span><span class="st">"binomial"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = Quality ~ assess_bottomempty, family = "binomial", 
    data = standard.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.4871   0.2807   0.4750   0.6070   1.0997  

Coefficients:
                    Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)        -0.577479   0.258462  -2.234   0.0255 *  
assess_bottomempty  0.089585   0.009999   8.960   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1476.4  on 1849  degrees of freedom
Residual deviance: 1368.4  on 1848  degrees of freedom
AIC: 1372.4

Number of Fisher Scoring iterations: 5</code></pre>
</div>
</div>
<p>In the boxplot we can see that as Assess Bottomempty increases, the quality of the image decreases. The IQR of the quality categories has overlap, but the medians are consistently different in the chart. There is an observation of note that the Yikes category has a particularly large IQR. The logistic regression also shows that there is overwhelming evidence for this being a useful feature in explaining the quality.</p>
</section>
<section id="assess-median-na-proportion" class="level3">
<h3 class="anchored" data-anchor-id="assess-median-na-proportion">Assess Median NA Proportion</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-10_cbf28a19cdc99c11601efd924931ca87">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(standard.data<span class="sc">$</span>assess_median_na_proportion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
0.00000 0.00331 0.01088 0.02073 0.02716 0.25525 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(standard.data, <span class="fu">aes</span>(<span class="at">x=</span>Quality, <span class="at">y=</span>assess_median_na_proportion)) <span class="sc">+</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Assess Median NA Proportion by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">glm</span>(Quality <span class="sc">~</span> assess_median_na_proportion,</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>standard.data, <span class="at">family=</span><span class="st">"binomial"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = Quality ~ assess_median_na_proportion, family = "binomial", 
    data = standard.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-4.0868   0.0000   0.0104   0.2550   1.4413  

Coefficients:
                            Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                  -0.6017     0.1206  -4.991 6.02e-07 ***
assess_median_na_proportion 585.1354    45.1784  12.952  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1476.42  on 1849  degrees of freedom
Residual deviance:  782.01  on 1848  degrees of freedom
AIC: 786.01

Number of Fisher Scoring iterations: 10</code></pre>
</div>
</div>
<p>In the boxplot we can see that as Assess Median NA Proportion increases, the quality of the image decreases. The IQR of the quality categories has overlap, but the medians are consistently different in the chart. The “Bad” and “Yikes” categories have very similar IQR and Medians. The logistic regression also shows that there is overwhelming evidence, with reservation, for this being a useful feature in explaining the quality.</p>
</section>
<section id="cross-correlations" class="level3">
<h3 class="anchored" data-anchor-id="cross-correlations">Cross Correlations</h3>
<p>XXX include https://heike.github.io/ggpcp/ and a scatterplot of the data</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-11_35de8194169baf38e49858f30f3e58ce">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>correlations <span class="ot">&lt;-</span> <span class="fu">cor</span>(standard.data[,<span class="dv">6</span><span class="sc">:</span><span class="dv">12</span>])</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(correlations, <span class="at">method =</span> <span class="st">"shade"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>There is significant correlation between most of the variables except assess rotation.</p>
</section>
</section>
<section id="model-analysis" class="level2">
<h2 class="anchored" data-anchor-id="model-analysis">Model Analysis</h2>
<p>XXX Why did I not include all the features in the models?!?!?! GRRRRR XXX REDO: all models with correct equations</p>
<table class="table">
<colgroup>
<col style="width: 9%">
<col style="width: 22%">
<col style="width: 22%">
<col style="width: 22%">
<col style="width: 22%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Standard Ordinal Logistic Regression</th>
<th>Standard Numerical Logistic Regression</th>
<th>Standard Ordinal Random Forest</th>
<th>Standard Numerical Random Forest</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TPR</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>TNR</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Categorical Predictions:</strong></p>
<p>For the purposes of this analysis, consider that the scanner using this model to decide if a scan needs to be re-done will be instructed that Good and Tiny Problems predictions likely don’t need to be re-done. However, Problematic, Bad, and Yikes scans have a high likelihood of needing to be redone.</p>
<p><strong>Quantitative Predictions:</strong></p>
<pre><code>--cutoff is....</code></pre>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-12_fc122e1fa4ce384d4fad756c43f8c882">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>sample <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="fu">nrow</span>(standard.data), <span class="at">replace=</span><span class="cn">TRUE</span>, <span class="at">prob=</span><span class="fu">c</span>(<span class="fl">0.75</span>,<span class="fl">0.25</span>))</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>train  <span class="ot">&lt;-</span> standard.data[sample, ]</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>test   <span class="ot">&lt;-</span> standard.data[<span class="sc">!</span>sample, ]</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>followup <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>num.Quality <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>num.Quality[train<span class="sc">$</span>Quality <span class="sc">==</span> <span class="st">"Good"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>num.Quality[train<span class="sc">$</span>Quality <span class="sc">==</span> <span class="st">"Tiny Problems"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>num.Quality <span class="ot">&lt;-</span> <span class="fu">factor</span>(train<span class="sc">$</span>num.Quality, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>followup <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.Quality <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.Quality[test<span class="sc">$</span>Quality <span class="sc">==</span> <span class="st">"Good"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.Quality[test<span class="sc">$</span>Quality <span class="sc">==</span> <span class="st">"Tiny Problems"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.Quality <span class="ot">&lt;-</span> <span class="fu">factor</span>(test<span class="sc">$</span>num.Quality, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Original"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Original"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(standard.data[,<span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Problem
Quality         Good Damage Holes Feathering Rotation-Staging
  Good           253      0     0          0                0
  Tiny Problems    0      1   991         61                6
  Problematic      0      3    10        235               15
  Bad              0     64     0        179               10
  Yikes            0      1     1         18                2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Train"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Train"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(train[,<span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Problem
Quality         Good Damage Holes Feathering Rotation-Staging
  Good           194      0     0          0                0
  Tiny Problems    0      1   762         45                6
  Problematic      0      3     9        175               11
  Bad              0     47     0        140                6
  Yikes            0      1     1         13                2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Test"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Test"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(test[,<span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Problem
Quality         Good Damage Holes Feathering Rotation-Staging
  Good            59      0     0          0                0
  Tiny Problems    0      0   229         16                0
  Problematic      0      0     1         60                4
  Bad              0     17     0         39                4
  Yikes            0      0     0          5                0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Train Numeric"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Train Numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(train<span class="sc">$</span>num.Quality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   0    1 
 408 1008 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Train Numeric"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Train Numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(train<span class="sc">$</span>num.Quality, train<span class="sc">$</span>Problem)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   
    Good Damage Holes Feathering Rotation-Staging
  0    0     51    10        328               19
  1  194      1   762         45                6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Test Numeric"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Test Numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(test<span class="sc">$</span>num.Quality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  0   1 
130 304 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Test Numeric"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Test Numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(test<span class="sc">$</span>num.Quality, test<span class="sc">$</span>Problem)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   
    Good Damage Holes Feathering Rotation-Staging
  0    0     17     1        104                8
  1   59      0   229         16                0</code></pre>
</div>
</div>
<section id="standard-ordinal-logistic-regression" class="level3">
<h3 class="anchored" data-anchor-id="standard-ordinal-logistic-regression">Standard Ordinal Logistic Regression</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-13_1297c3c213085556e160fc4f0455e091">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>ord.Model <span class="ot">&lt;-</span> <span class="fu">polr</span>(Quality <span class="sc">~</span> assess_percentile_na_proportion <span class="sc">+</span> assess_col_na <span class="sc">+</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>                         extract_na <span class="sc">+</span> assess_middle_na_proportion <span class="sc">+</span> assess_bottomempty <span class="sc">+</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>                         assess_median_na_proportion,</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>train, <span class="at">method=</span><span class="st">"logistic"</span>)</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="co"># XXX model doesn't seem to like assess_median_na_proportion</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ord.Model)</span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>Predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(ord.Model, test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The model did not predict a single Good scan in all 459 scans of the test data. It did however, keep all of the Good scans in the Tiny Problems category. The model got 237/264 tiny problems accurately predicted, with one concern that a Tiny Problems scan got labelled as Yikes. So what should have been an acceptable scan got labelled as completely terrible. The Problematic category has some significant spread, concerningly, 44% of the Problematic scans, which is out cutoff of non-acceptability got labelled as Tiny Problems. The Problematic category is consistently incorrectly labelled as better than it is. The Bad category is correctly labelled 43% of the time, and is consistently labelled in the non-acceptable category, with 18 out of 60 scans being placed wrong. The Yikes category was consistently labelled as bad, and therefore is entirely in the non-acceptable category, which is what we are looking for.</p>
<p>To help compare these models, we will introduce a compression concept. Just as before, all scans will be divided into Good, which includes Good and Tiny Problems. Bad will include all other categories.</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-14_06ff1a7c6a80c5b4c7aca28abf273f58">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions[test<span class="sc">$</span>Predictions <span class="sc">==</span> <span class="st">"Good"</span>] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions[test<span class="sc">$</span>Predictions <span class="sc">==</span> <span class="st">"Tiny Problems"</span>] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">&lt;-</span> <span class="fu">factor</span>(test<span class="sc">$</span>num.predictions, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Top is true value, left is predicted</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>metrics <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(test<span class="sc">$</span>num.predictions,</span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>                           test<span class="sc">$</span>num.Quality, <span class="at">mode=</span><span class="st">"everything"</span>, <span class="at">positive =</span> <span class="st">"1"</span>)</span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>metrics</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   0   1
         0  82   9
         1  48 295
                                         
               Accuracy : 0.8687         
                 95% CI : (0.8332, 0.899)
    No Information Rate : 0.7005         
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16      
                                         
                  Kappa : 0.6576         
                                         
 Mcnemar's Test P-Value : 4.823e-07      
                                         
            Sensitivity : 0.9704         
            Specificity : 0.6308         
         Pos Pred Value : 0.8601         
         Neg Pred Value : 0.9011         
              Precision : 0.8601         
                 Recall : 0.9704         
                     F1 : 0.9119         
             Prevalence : 0.7005         
         Detection Rate : 0.6797         
   Detection Prevalence : 0.7903         
      Balanced Accuracy : 0.8006         
                                         
       'Positive' Class : 1              
                                         </code></pre>
</div>
</div>
</section>
<section id="standard-numerical-regression" class="level3">
<h3 class="anchored" data-anchor-id="standard-numerical-regression">Standard Numerical regression</h3>
<ul>
<li>(Good/Tiny = 1, Problematic/Bad/Yikes = 0)</li>
</ul>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-15_76ca105821a8b44ae088e53796eb8324">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>num.logit.model <span class="ot">&lt;-</span> <span class="fu">glm</span>(num.Quality <span class="sc">~</span> assess_percentile_na_proportion <span class="sc">+</span> assess_col_na <span class="sc">+</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>                         extract_na <span class="sc">+</span> assess_middle_na_proportion <span class="sc">+</span> assess_bottomempty <span class="sc">+</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>                         assess_median_na_proportion,</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>train, <span class="at">family=</span><span class="st">"binomial"</span>)</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(num.logit.model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = num.Quality ~ assess_percentile_na_proportion + 
    assess_col_na + extract_na + assess_middle_na_proportion + 
    assess_bottomempty + assess_median_na_proportion, family = "binomial", 
    data = train)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.8272  -0.0928   0.2885   0.4516   3.8148  

Coefficients: (1 not defined because of singularities)
                                 Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                       4.33863    0.66852   6.490 8.59e-11 ***
assess_percentile_na_proportion -45.68310   10.47690  -4.360 1.30e-05 ***
assess_col_na                    -2.00321    0.68468  -2.926 0.003436 ** 
extract_na                       -0.02821    0.05589  -0.505 0.613798    
assess_middle_na_proportion     -41.59729   11.41217  -3.645 0.000267 ***
assess_bottomempty                0.08773    0.02911   3.013 0.002585 ** 
assess_median_na_proportion            NA         NA      NA       NA    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1700.54  on 1415  degrees of freedom
Residual deviance:  866.04  on 1410  degrees of freedom
AIC: 878.04

Number of Fisher Scoring iterations: 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(num.logit.model, test, <span class="at">type=</span><span class="st">"response"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predict.lm(object, newdata, se.fit, scale = 1, type = if (type == :
prediction from a rank-deficient fit may be misleading</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># XXX Figure out followup scans</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>test[test<span class="sc">$</span>num.predictions <span class="sc">&lt;</span> <span class="fl">0.5</span> <span class="sc">&amp;</span> test<span class="sc">$</span>num.Quality <span class="sc">==</span> <span class="dv">1</span>, ]<span class="sc">$</span>followup <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>test[test<span class="sc">$</span>num.predictions <span class="sc">&gt;</span> <span class="fl">0.75</span> <span class="sc">&amp;</span> test<span class="sc">$</span>num.Quality <span class="sc">==</span> <span class="dv">0</span>, ]<span class="sc">$</span>followup <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(test, <span class="fu">aes</span>(<span class="at">x=</span>num.Quality, <span class="at">y=</span>num.predictions)) <span class="sc">+</span></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"True Quality"</span>) <span class="sc">+</span></span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Probability of good scan"</span>) <span class="sc">+</span></span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Numerical Logistic Prediction Test Data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(test, <span class="fu">aes</span>(<span class="at">x=</span>num.Quality, <span class="at">y=</span>num.predictions, <span class="at">color=</span>followup)) <span class="sc">+</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_colour_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"grey50"</span>, <span class="st">"darkorange"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-15-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The boxplot shows a general picture of the results of the model. There is a significant number of misclassified scans. Using a typical 0.5 rounding we get the confusion matrix:</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-16_d94491b314f3dafcf1c7e083b41f19bd">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Top is true value, left is predicted</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>metrics <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(<span class="fu">factor</span>(<span class="fu">round</span>(test<span class="sc">$</span>num.predictions)),</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>                           test<span class="sc">$</span>num.Quality, <span class="at">mode=</span><span class="st">"everything"</span>, <span class="at">positive =</span> <span class="st">"1"</span>)</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>metrics</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   0   1
         0  97  11
         1  33 293
                                          
               Accuracy : 0.8986          
                 95% CI : (0.8663, 0.9254)
    No Information Rate : 0.7005          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.7461          
                                          
 Mcnemar's Test P-Value : 0.001546        
                                          
            Sensitivity : 0.9638          
            Specificity : 0.7462          
         Pos Pred Value : 0.8988          
         Neg Pred Value : 0.8981          
              Precision : 0.8988          
                 Recall : 0.9638          
                     F1 : 0.9302          
             Prevalence : 0.7005          
         Detection Rate : 0.6751          
   Detection Prevalence : 0.7512          
      Balanced Accuracy : 0.8550          
                                          
       'Positive' Class : 1               
                                          </code></pre>
</div>
</div>
</section>
<section id="standard-ordinal-random-forest" class="level3">
<h3 class="anchored" data-anchor-id="standard-ordinal-random-forest">Standard Ordinal random forest</h3>
<p>Metrics -McNemars -kappas -various agreement outputs and stuff.</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-17_e35cec572bfeef5ea9e2059e4232066a">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>ord.forest.model <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(Quality <span class="sc">~</span> assess_percentile_na_proportion <span class="sc">+</span> assess_col_na <span class="sc">+</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>                         extract_na <span class="sc">+</span> assess_middle_na_proportion <span class="sc">+</span> assess_bottomempty <span class="sc">+</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>                         assess_median_na_proportion, <span class="at">data =</span> train,</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">importance =</span> <span class="cn">TRUE</span>)</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>Prediction <span class="ot">&lt;-</span> <span class="fu">predict</span>(ord.forest.model, test)</span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Test data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Test data"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(test<span class="sc">$</span>Quality, test<span class="sc">$</span>Prediction)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               
                Good Tiny Problems Problematic Bad Yikes
  Good            41            18           0   0     0
  Tiny Problems   18           209          14   4     0
  Problematic      1            24          21  19     0
  Bad              0            12          16  30     2
  Yikes            0             0           0   5     0</code></pre>
</div>
</div>
<p>To help compare these models, we once again use the previous compression metrics.</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-18_de4291d09114f914651f39ecb700285a">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions[test<span class="sc">$</span>Predictions <span class="sc">==</span> <span class="st">"Good"</span>] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions[test<span class="sc">$</span>Predictions <span class="sc">==</span> <span class="st">"Tiny Problems"</span>] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">&lt;-</span> <span class="fu">factor</span>(test<span class="sc">$</span>num.predictions, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Top is true value, left is predicted</span></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>metrics <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(test<span class="sc">$</span>num.predictions,</span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>                           test<span class="sc">$</span>num.Quality, <span class="at">mode=</span><span class="st">"everything"</span>, <span class="at">positive =</span> <span class="st">"1"</span>)</span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a>metrics</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   0   1
         0  83   8
         1  47 296
                                          
               Accuracy : 0.8733          
                 95% CI : (0.8383, 0.9031)
    No Information Rate : 0.7005          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.6696          
                                          
 Mcnemar's Test P-Value : 2.992e-07       
                                          
            Sensitivity : 0.9737          
            Specificity : 0.6385          
         Pos Pred Value : 0.8630          
         Neg Pred Value : 0.9121          
              Precision : 0.8630          
                 Recall : 0.9737          
                     F1 : 0.9150          
             Prevalence : 0.7005          
         Detection Rate : 0.6820          
   Detection Prevalence : 0.7903          
      Balanced Accuracy : 0.8061          
                                          
       'Positive' Class : 1               
                                          </code></pre>
</div>
</div>
</section>
<section id="standard-numerical-random-forest" class="level3">
<h3 class="anchored" data-anchor-id="standard-numerical-random-forest">Standard Numerical Random Forest</h3>
<ul>
<li>(Good/Tiny = 1, Problematic/Bad/Yikes = 0)</li>
<li>(Good = 1, Yikes = 0, drop others)</li>
</ul>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-19_8caca7a7fdb26660ff0117dbd6e7e186">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>num.RF.model <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(num.Quality <span class="sc">~</span> assess_percentile_na_proportion <span class="sc">+</span> assess_col_na <span class="sc">+</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>                         extract_na <span class="sc">+</span> assess_middle_na_proportion <span class="sc">+</span> assess_bottomempty <span class="sc">+</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>                         assess_median_na_proportion, <span class="at">data =</span> train,</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">importance =</span> <span class="cn">TRUE</span>)</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(num.RF.model, test, <span class="at">type=</span><span class="st">"prob"</span>)[,<span class="dv">2</span>]</span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>test[test<span class="sc">$</span>num.predictions <span class="sc">&lt;</span> <span class="fl">0.5</span> <span class="sc">&amp;</span> test<span class="sc">$</span>num.Quality <span class="sc">==</span> <span class="dv">1</span>, ]<span class="sc">$</span>followup <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>test[test<span class="sc">$</span>num.predictions <span class="sc">&gt;</span> <span class="fl">0.75</span> <span class="sc">&amp;</span> test<span class="sc">$</span>num.Quality <span class="sc">==</span> <span class="dv">0</span>, ]<span class="sc">$</span>followup <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(test, <span class="fu">aes</span>(<span class="at">x=</span>num.Quality, <span class="at">y=</span>num.predictions)) <span class="sc">+</span></span>
<span id="cb88-12"><a href="#cb88-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb88-13"><a href="#cb88-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"True Quality"</span>) <span class="sc">+</span></span>
<span id="cb88-14"><a href="#cb88-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Probability of good scan"</span>) <span class="sc">+</span></span>
<span id="cb88-15"><a href="#cb88-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Numerical Logistic Prediction Test Data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(test, <span class="fu">aes</span>(<span class="at">x=</span>num.Quality, <span class="at">y=</span>num.predictions, <span class="at">color=</span>followup)) <span class="sc">+</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_colour_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"grey50"</span>, <span class="st">"darkorange"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-19-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The boxplot shows a general picture of the results of the model. There is a significant number of misclassified scans. Using a typical 0.5 rounding we get the confusion matrix:</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-20_fa83daf811e1513c4511154d60e47035">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Top is true value, left is predicted</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>metrics <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(<span class="fu">factor</span>(<span class="fu">round</span>(test<span class="sc">$</span>num.predictions)),</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>                           test<span class="sc">$</span>num.Quality, <span class="at">mode=</span><span class="st">"everything"</span>, <span class="at">positive =</span> <span class="st">"1"</span>)</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>metrics</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   0   1
         0  97  11
         1  33 293
                                          
               Accuracy : 0.8986          
                 95% CI : (0.8663, 0.9254)
    No Information Rate : 0.7005          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.7461          
                                          
 Mcnemar's Test P-Value : 0.001546        
                                          
            Sensitivity : 0.9638          
            Specificity : 0.7462          
         Pos Pred Value : 0.8988          
         Neg Pred Value : 0.8981          
              Precision : 0.8988          
                 Recall : 0.9638          
                     F1 : 0.9302          
             Prevalence : 0.7005          
         Detection Rate : 0.6751          
   Detection Prevalence : 0.7512          
      Balanced Accuracy : 0.8550          
                                          
       'Positive' Class : 1               
                                          </code></pre>
</div>
</div>
</section>
</section>
<section id="cropped-feature-analysis" class="level2">
<h2 class="anchored" data-anchor-id="cropped-feature-analysis">Cropped Feature Analysis</h2>
<section id="hypothesis" class="level4">
<h4 class="anchored" data-anchor-id="hypothesis">Hypothesis</h4>
<p>The quality of our images predicted by the models and assessed by our algorithms is dependent on the how much of the data from the scan is legible and useful. The bottom middle of the bullet gives us the most information, due to the striations in this area being most prominent. Some scans get distorted due to numerous external factors ranging from a bad scan to the bullet undergoing damages that’s affected those striations. Cropping our scans to cut off parts of the scan that are non-essential could help to eliminate the ‘noise’ around the images that skew the accuracy of the results. The goal is to see whether making a crop will improve the accuracy of our models.</p>
</section>
<section id="process" class="level4">
<h4 class="anchored" data-anchor-id="process">Process</h4>
<p>To conduct our analysis, we did a series of tests to compare the cropped version of a scan against the full version. We constructed scatter and box plots as well as ROC curves for visual analysis. We trained a Generalized Linear Model (glm) to test the p values, or importance, of each variable in explaining the quality, and constructed kernel density graphs to compare the scans. Every cropped scan and its full scan counterpart were found to have more than 90% correlation with each other, requiring us to use only one of them for each feature to avoid co-linearity issues.</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-21_000177d54cfd2fcaa6e0804aaccda7d8">
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 31%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 17%">
<col style="width: 10%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">Correlation</th>
<th style="text-align: left;">pvalue_Full</th>
<th style="text-align: left;">pvalue_cropped</th>
<th style="text-align: left;">auc_Full</th>
<th style="text-align: left;">auc_Cropped</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Extract NA</td>
<td style="text-align: left;">0.908</td>
<td style="text-align: left;">0.229</td>
<td style="text-align: left;">&lt;2e-16</td>
<td style="text-align: left;">0.871</td>
<td style="text-align: left;">0.902</td>
</tr>
<tr class="even">
<td style="text-align: left;">Assess Bottomempty</td>
<td style="text-align: left;">0.905</td>
<td style="text-align: left;">5.86e-10</td>
<td style="text-align: left;">&lt;2e-16</td>
<td style="text-align: left;">0.783</td>
<td style="text-align: left;">0.859</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Assess Col NA</td>
<td style="text-align: left;">0.919</td>
<td style="text-align: left;">1.62e-06</td>
<td style="text-align: left;">1.17e-14</td>
<td style="text-align: left;">0.888</td>
<td style="text-align: left;">0.896</td>
</tr>
<tr class="even">
<td style="text-align: left;">Assess Median NA Proportion</td>
<td style="text-align: left;">0.908</td>
<td style="text-align: left;">&lt;2e-16</td>
<td style="text-align: left;">6.77e-10</td>
<td style="text-align: left;">0.907</td>
<td style="text-align: left;">0.863</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="extract-na-cropped" class="level3">
<h3 class="anchored" data-anchor-id="extract-na-cropped">Extract NA Cropped</h3>
<section id="which-of-the-features-is-better-for-discriminating-between-good-and-bad-scans" class="level4">
<h4 class="anchored" data-anchor-id="which-of-the-features-is-better-for-discriminating-between-good-and-bad-scans">Which of the features is better for discriminating between good and bad scans?</h4>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-22_0ff8873ce23ab2a8eb632b29ab7de5b1">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Returning more (or less) than 1 row per `summarise()` group was deprecated in
dplyr 1.1.0.
ℹ Please use `reframe()` instead.
ℹ When switching from `summarise()` to `reframe()`, remember that `reframe()`
  always returns an ungrouped data frame and adjust accordingly.
ℹ The deprecated feature was likely used in the yardstick package.
  Please report the issue at &lt;https://github.com/tidymodels/yardstick/issues&gt;.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-22-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-22-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Extract NA. Correlation:  0.908 Full AUC: 0.871 Cropped AUC:  0.902"</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Summary Info of Extract NA</caption>
<colgroup>
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 13%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">firstQ</th>
<th style="text-align: right;">med</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">thirdQ</th>
<th style="text-align: right;">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Standard</td>
<td style="text-align: right;">3.666645</td>
<td style="text-align: right;">12.79727</td>
<td style="text-align: right;">15.082281</td>
<td style="text-align: right;">15.915471</td>
<td style="text-align: right;">18.30296</td>
<td style="text-align: right;">48.45372</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cropped</td>
<td style="text-align: right;">1.389464</td>
<td style="text-align: right;">6.38338</td>
<td style="text-align: right;">8.060005</td>
<td style="text-align: right;">8.916349</td>
<td style="text-align: right;">10.57698</td>
<td style="text-align: right;">40.80471</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="should-we-use-features-from-just-one-type-of-scan-or-both" class="level4">
<h4 class="anchored" data-anchor-id="should-we-use-features-from-just-one-type-of-scan-or-both">Should we use features from just one type of scan or both?</h4>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-23_a738990a45b1b53d779df981778d5782">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = GoodScan ~ extract_na + extract_na_cropped, family = binomial(), 
    data = full.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-3.1882  -0.2394   0.3044   0.5298   4.0795  

Coefficients:
                   Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)         7.16247    0.37858  18.919   &lt;2e-16 ***
extract_na         -0.04349    0.03613  -1.204    0.229    
extract_na_cropped -0.58303    0.05020 -11.615   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 2230.6  on 1849  degrees of freedom
Residual deviance: 1299.2  on 1847  degrees of freedom
AIC: 1305.2

Number of Fisher Scoring iterations: 6</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="conclusion-for-extract-na" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-for-extract-na">Conclusion for Extract NA</h4>
<p>The values for feature <code>extract_NA</code> are highly correlated between the cropped and the full scan.</p>
<p>Using good and scans with only tiny problems as overall ‘good’ scans, the feature applied to cropped scans has an increased accuracy compared to the feature values from the full scan.</p>
<p>We might want to follow up on the orange colored scans:</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-24_53bc3023ad4144fbd9e7838086f25877">
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-25_55ef5480b5c156e67c71987afd4e604b">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>full.data<span class="sc">$</span>LAPD_id[full.data<span class="sc">$</span>followup]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "FAU263-BA-L4" "FAU263-BC-L1" "FAU263-BC-L3" "FAU287-BC-L5" "FAU154-BD-L2"
[6] "FAU277-BA-L4" "FAU286-BA-L5"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>followupScans <span class="ot">&lt;-</span> <span class="fu">rbind</span>(followupScans, full.data[full.data<span class="sc">$</span>followup <span class="sc">==</span> <span class="cn">TRUE</span>,])</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="co"># All followups for extract_na are mislabelled scans. They are all labelled as tiny problems but should be problematic or worse.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="assess-bottomempty-cropped" class="level3">
<h3 class="anchored" data-anchor-id="assess-bottomempty-cropped">Assess Bottomempty Cropped</h3>
<section id="which-of-the-features-is-better-for-discriminating-between-good-and-bad-scans-1" class="level4">
<h4 class="anchored" data-anchor-id="which-of-the-features-is-better-for-discriminating-between-good-and-bad-scans-1">Which of the features is better for discriminating between good and bad scans?</h4>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-27_940c400fbc66e4e6591738a2321ddbd7">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Returning more (or less) than 1 row per `summarise()` group was deprecated in
dplyr 1.1.0.
ℹ Please use `reframe()` instead.
ℹ When switching from `summarise()` to `reframe()`, remember that `reframe()`
  always returns an ungrouped data frame and adjust accordingly.
ℹ The deprecated feature was likely used in the yardstick package.
  Please report the issue at &lt;https://github.com/tidymodels/yardstick/issues&gt;.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-27-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-27-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Assess Bottomempty. Correlation:  0.905 Full AUC: 0.783 Cropped AUC:  0.859"</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Summary Info of Assess Bottomempty</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">firstQ</th>
<th style="text-align: right;">med</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">thirdQ</th>
<th style="text-align: right;">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Standard</td>
<td style="text-align: right;">8.516493</td>
<td style="text-align: right;">22.66947</td>
<td style="text-align: right;">27.54019</td>
<td style="text-align: right;">29.90259</td>
<td style="text-align: right;">34.63373</td>
<td style="text-align: right;">95.39375</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cropped</td>
<td style="text-align: right;">3.564558</td>
<td style="text-align: right;">10.78581</td>
<td style="text-align: right;">13.54205</td>
<td style="text-align: right;">15.28335</td>
<td style="text-align: right;">17.71191</td>
<td style="text-align: right;">84.22476</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="should-we-use-features-from-just-one-type-of-scan-or-both-1" class="level4">
<h4 class="anchored" data-anchor-id="should-we-use-features-from-just-one-type-of-scan-or-both-1">Should we use features from just one type of scan or both?</h4>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-28_f46cd9db2ed1c30ddb1b8dc1464b6aa7">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = GoodScan ~ assess_bottomempty + assess_bottomempty_cropped, 
    family = binomial(), data = full.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.6794  -0.2813   0.4084   0.6028   4.0680  

Coefficients:
                           Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                 4.57647    0.25156  18.193  &lt; 2e-16 ***
assess_bottomempty          0.09046    0.01460   6.194 5.86e-10 ***
assess_bottomempty_cropped -0.40779    0.02738 -14.895  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 2230.6  on 1849  degrees of freedom
Residual deviance: 1503.7  on 1847  degrees of freedom
AIC: 1509.7

Number of Fisher Scoring iterations: 5</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="conclusion-for-assess-bottomempty" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-for-assess-bottomempty">Conclusion for Assess Bottomempty</h4>
<p>The values for feature <code>assess_bottomempty</code> are highly correlated between the cropped and the full scan.</p>
<p>Using good and scans with only tiny problems as overall ‘good’ scans, the feature applied to cropped scans has an increased accuracy compared to the feature values from the full scan.</p>
<p>We might want to follow up on the orange colored scans:</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-29_0110630bb30aeac26759b66f269fe52c">
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-30_d43ef27aaf1721077163fe531215a211">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>full.data<span class="sc">$</span>LAPD_id[full.data<span class="sc">$</span>followup]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "FAU263-BA-L4" "FAU287-BC-L5" "FAU254-BD-L4" "FAU275-BC-L5" "FAU275-BD-L3"
[6] "FAU277-BA-L4" "FAU286-BA-L5"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>followupScans <span class="ot">&lt;-</span> <span class="fu">rbind</span>(followupScans, full.data[full.data<span class="sc">$</span>followup <span class="sc">==</span> <span class="cn">TRUE</span>,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="assess-col-na-cropped" class="level3">
<h3 class="anchored" data-anchor-id="assess-col-na-cropped">Assess Col NA Cropped</h3>
<section id="which-of-the-features-is-better-for-discriminating-between-good-and-bad-scans-2" class="level4">
<h4 class="anchored" data-anchor-id="which-of-the-features-is-better-for-discriminating-between-good-and-bad-scans-2">Which of the features is better for discriminating between good and bad scans?</h4>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-32_b8af909b14cd2663df3be031d60e57dc">
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-32-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-32-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Assess Col NA Correlation:  0.919 Full AUC: 0.888 Cropped AUC:  0.896"</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Summary Info of Assess Col NA</caption>
<colgroup>
<col style="width: 13%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 13%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">firstQ</th>
<th style="text-align: right;">med</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">thirdQ</th>
<th style="text-align: right;">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Standard</td>
<td style="text-align: right;">0.2573318</td>
<td style="text-align: right;">0.9244176</td>
<td style="text-align: right;">1.0755102</td>
<td style="text-align: right;">1.1654392</td>
<td style="text-align: right;">1.292844</td>
<td style="text-align: right;">4.368436</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cropped</td>
<td style="text-align: right;">0.0920783</td>
<td style="text-align: right;">0.4700281</td>
<td style="text-align: right;">0.6126759</td>
<td style="text-align: right;">0.6851693</td>
<td style="text-align: right;">0.807577</td>
<td style="text-align: right;">3.356120</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="should-we-use-features-from-just-one-type-of-scan-or-both-2" class="level4">
<h4 class="anchored" data-anchor-id="should-we-use-features-from-just-one-type-of-scan-or-both-2">Should we use features from just one type of scan or both?</h4>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-33_98398416f5f24a38627ee211e8d2307c">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = GoodScan ~ assess_col_na + assess_col_na_cropped, 
    family = binomial(), data = full.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-3.2254  -0.1897   0.3176   0.5365   3.6049  

Coefficients:
                      Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)             7.3581     0.3785  19.440  &lt; 2e-16 ***
assess_col_na          -2.4724     0.5155  -4.796 1.62e-06 ***
assess_col_na_cropped  -4.8233     0.6249  -7.719 1.17e-14 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 2230.6  on 1849  degrees of freedom
Residual deviance: 1308.8  on 1847  degrees of freedom
AIC: 1314.8

Number of Fisher Scoring iterations: 6</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="conclusion-for-assess-col-na" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-for-assess-col-na">Conclusion for Assess Col NA</h4>
<p>The values for feature <code>assess_col_na</code> are highly correlated between the cropped and the full scan.</p>
<p>Using good and scans with only tiny problems as overall ‘good’ scans, the feature applied to cropped scans has an increased accuracy compared to the feature values from the full scan.</p>
<p>We might want to follow up on the orange colored scans:</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-34_c9333e17a5b0b1daf704e2944bb39971">
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-35_387adc96738abfdc9f07c3081aacbfe1">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>full.data<span class="sc">$</span>LAPD_id[full.data<span class="sc">$</span>followup]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "FAU263-BA-L4" "FAU263-BB-L3" "FAU263-BC-L1" "FAU263-BC-L3" "FAU154-BD-L2"
[6] "FAU286-BA-L5"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>followupScans <span class="ot">&lt;-</span> <span class="fu">rbind</span>(followupScans, full.data[full.data<span class="sc">$</span>followup <span class="sc">==</span> <span class="cn">TRUE</span>,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="assess-median-na-proportion-cropped" class="level3">
<h3 class="anchored" data-anchor-id="assess-median-na-proportion-cropped">Assess Median NA Proportion Cropped</h3>
<section id="which-of-the-features-is-better-for-discriminating-between-good-and-bad-scans-3" class="level4">
<h4 class="anchored" data-anchor-id="which-of-the-features-is-better-for-discriminating-between-good-and-bad-scans-3">Which of the features is better for discriminating between good and bad scans?</h4>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-37_b575e48525eece8f9d5feb9390e8f416">
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-37-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-37-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Assess Median NA Proportion. Correlation:  0.908 Full AUC: 0.907 Cropped AUC:  0.863"</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Summary Info of Assess median NA proportion</caption>
<colgroup>
<col style="width: 13%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">firstQ</th>
<th style="text-align: right;">med</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">thirdQ</th>
<th style="text-align: right;">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Standard</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">0.0033099</td>
<td style="text-align: right;">0.0108771</td>
<td style="text-align: right;">0.0207348</td>
<td style="text-align: right;">0.0271577</td>
<td style="text-align: right;">0.2552491</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cropped</td>
<td style="text-align: right;">0.0011692</td>
<td style="text-align: right;">0.0518201</td>
<td style="text-align: right;">0.0686747</td>
<td style="text-align: right;">0.0751096</td>
<td style="text-align: right;">0.0918769</td>
<td style="text-align: right;">0.2994505</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="should-we-use-features-from-just-one-type-of-scan-or-both-3" class="level4">
<h4 class="anchored" data-anchor-id="should-we-use-features-from-just-one-type-of-scan-or-both-3">Should we use features from just one type of scan or both?</h4>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-38_bace8dd8f755f0a0aa4176fcf6cd3250">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = GoodScan ~ assess_median_na_proportion + assess_median_na_proportion_cropped, 
    family = binomial(), data = full.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.8226  -0.1079   0.3143   0.4865   5.2612  

Coefficients:
                                    Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                            4.384      0.257  17.060  &lt; 2e-16 ***
assess_median_na_proportion          -83.035      5.925 -14.014  &lt; 2e-16 ***
assess_median_na_proportion_cropped  -21.546      3.491  -6.171 6.77e-10 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 2230.6  on 1849  degrees of freedom
Residual deviance: 1219.0  on 1847  degrees of freedom
AIC: 1225

Number of Fisher Scoring iterations: 6</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="conclusion-for-assess-median-na-proportion" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-for-assess-median-na-proportion">Conclusion for Assess Median NA Proportion</h4>
<p>The values for feature <code>extract_NA</code> are highly correlated between the cropped and the full scan.</p>
<p>Using good and scans with only tiny problems as overall ‘good’ scans, the feature applied to full scans has an increased accuracy compared to the feature values from the cropped scan.</p>
<p>We might want to follow up on the orange colored scans:</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-39_05acfd43637f5887600b54757e74a367">
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-40_f2a24c9e805d3cc238da0f4072a3f086">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>full.data<span class="sc">$</span>LAPD_id[full.data<span class="sc">$</span>followup]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "FAU263-BC-L3" "FAU154-BD-L2" "FAU204-BC-L4"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>followupScans <span class="ot">&lt;-</span> <span class="fu">rbind</span>(followupScans, full.data[full.data<span class="sc">$</span>followup <span class="sc">==</span> <span class="cn">TRUE</span>,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="cropped-model-analysis" class="level2">
<h2 class="anchored" data-anchor-id="cropped-model-analysis">Cropped Model Analysis</h2>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-42_fe53fe919ee2f7dc14a0debdc6816501">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>sample <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="fu">nrow</span>(full.data), <span class="at">replace=</span><span class="cn">TRUE</span>, <span class="at">prob=</span><span class="fu">c</span>(<span class="fl">0.75</span>,<span class="fl">0.25</span>))</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>train  <span class="ot">&lt;-</span> full.data[sample, ]</span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>test   <span class="ot">&lt;-</span> full.data[<span class="sc">!</span>sample, ]</span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>followup <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>num.Quality <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>num.Quality[train<span class="sc">$</span>Quality <span class="sc">==</span> <span class="st">"Good"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>num.Quality[train<span class="sc">$</span>Quality <span class="sc">==</span> <span class="st">"Tiny Problems"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb114-9"><a href="#cb114-9" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>num.Quality <span class="ot">&lt;-</span> <span class="fu">factor</span>(train<span class="sc">$</span>num.Quality, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb114-10"><a href="#cb114-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-11"><a href="#cb114-11" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>followup <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb114-12"><a href="#cb114-12" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.Quality <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb114-13"><a href="#cb114-13" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.Quality[test<span class="sc">$</span>Quality <span class="sc">==</span> <span class="st">"Good"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb114-14"><a href="#cb114-14" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.Quality[test<span class="sc">$</span>Quality <span class="sc">==</span> <span class="st">"Tiny Problems"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb114-15"><a href="#cb114-15" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.Quality <span class="ot">&lt;-</span> <span class="fu">factor</span>(test<span class="sc">$</span>num.Quality, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb114-16"><a href="#cb114-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-17"><a href="#cb114-17" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Original"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Original"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(standard.data[,<span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Problem
Quality         Good Damage Holes Feathering Rotation-Staging
  Good           253      0     0          0                0
  Tiny Problems    0      1   991         61                6
  Problematic      0      3    10        235               15
  Bad              0     64     0        179               10
  Yikes            0      1     1         18                2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Train"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Train"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(train[,<span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Problem
Quality         Good Damage Holes Feathering Rotation-Staging
  Good           191      0     0          0                0
  Tiny Problems    0      0   738         43                4
  Problematic      0      2     8        188               14
  Bad              0     50     0        128                7
  Yikes            0      1     1         13                2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Test"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Test"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(test[,<span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Problem
Quality         Good Damage Holes Feathering Rotation-Staging
  Good            62      0     0          0                0
  Tiny Problems    0      1   253         18                2
  Problematic      0      1     2         47                1
  Bad              0     14     0         51                3
  Yikes            0      0     0          5                0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Train Numeric"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Train Numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(train<span class="sc">$</span>num.Quality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  0   1 
414 976 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Train Numeric"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Train Numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(train<span class="sc">$</span>num.Quality, train<span class="sc">$</span>Problem)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   
    Good Damage Holes Feathering Rotation-Staging
  0    0     53     9        329               23
  1  191      0   738         43                4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Test Numeric"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Test Numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(test<span class="sc">$</span>num.Quality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  0   1 
124 336 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Test Numeric"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Test Numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(test<span class="sc">$</span>num.Quality, test<span class="sc">$</span>Problem)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   
    Good Damage Holes Feathering Rotation-Staging
  0    0     15     2        103                4
  1   62      1   253         18                2</code></pre>
</div>
</div>
<p>XXX Upfront table of the results</p>
<section id="cropped-ordinal-logistic-regression" class="level3">
<h3 class="anchored" data-anchor-id="cropped-ordinal-logistic-regression">Cropped Ordinal Logistic Regression</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-43_a4ec9d0359397c84fff8edc7fad1dd85">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>crop.ord.Model <span class="ot">&lt;-</span> <span class="fu">polr</span>(Quality <span class="sc">~</span> assess_percentile_na_proportion <span class="sc">+</span> assess_col_na_cropped <span class="sc">+</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>                         extract_na_cropped <span class="sc">+</span> assess_middle_na_proportion <span class="sc">+</span> assess_bottomempty_cropped <span class="sc">+</span></span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>                         assess_median_na_proportion,</span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>train, <span class="at">method=</span><span class="st">"logistic"</span>)</span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-6"><a href="#cb142-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Doesn't like assess_percentile_na_proportion</span></span>
<span id="cb142-7"><a href="#cb142-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-8"><a href="#cb142-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(crop.ord.Model)</span>
<span id="cb142-9"><a href="#cb142-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-10"><a href="#cb142-10" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>Predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(crop.ord.Model, test)</span>
<span id="cb142-11"><a href="#cb142-11" aria-hidden="true" tabindex="-1"></a><span class="co"># True values on the top, Predictions on the left</span></span>
<span id="cb142-12"><a href="#cb142-12" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(test<span class="sc">$</span>Predictions, test<span class="sc">$</span>Quality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To help compare these models, we will introduce a compression concept. Just as before, all scans will be divided into Good, which includes Good and Tiny Problems. Bad will include all other categories.</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-44_c32ce02f94276a752de18b949a54b388">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions[test<span class="sc">$</span>Predictions <span class="sc">==</span> <span class="st">"Good"</span>] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions[test<span class="sc">$</span>Predictions <span class="sc">==</span> <span class="st">"Tiny Problems"</span>] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">&lt;-</span> <span class="fu">factor</span>(test<span class="sc">$</span>num.predictions, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Top is true value, left is predicted</span></span>
<span id="cb143-7"><a href="#cb143-7" aria-hidden="true" tabindex="-1"></a>metrics <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(test<span class="sc">$</span>num.predictions,</span>
<span id="cb143-8"><a href="#cb143-8" aria-hidden="true" tabindex="-1"></a>                           test<span class="sc">$</span>num.Quality, <span class="at">mode=</span><span class="st">"everything"</span>, <span class="at">positive =</span> <span class="st">"1"</span>)</span>
<span id="cb143-9"><a href="#cb143-9" aria-hidden="true" tabindex="-1"></a>metrics</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   0   1
         0 124 336
         1   0   0
                                          
               Accuracy : 0.2696          
                 95% CI : (0.2295, 0.3126)
    No Information Rate : 0.7304          
    P-Value [Acc &gt; NIR] : 1               
                                          
                  Kappa : 0               
                                          
 Mcnemar's Test P-Value : &lt;2e-16          
                                          
            Sensitivity : 0.0000          
            Specificity : 1.0000          
         Pos Pred Value :    NaN          
         Neg Pred Value : 0.2696          
              Precision :     NA          
                 Recall : 0.0000          
                     F1 :     NA          
             Prevalence : 0.7304          
         Detection Rate : 0.0000          
   Detection Prevalence : 0.0000          
      Balanced Accuracy : 0.5000          
                                          
       'Positive' Class : 1               
                                          </code></pre>
</div>
</div>
</section>
<section id="cropped-numerical-logistic-regression" class="level3">
<h3 class="anchored" data-anchor-id="cropped-numerical-logistic-regression">Cropped Numerical Logistic Regression</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-45_b01ed2381f5a47f87d080cab497a3215">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>crop.num.logit.model <span class="ot">&lt;-</span> <span class="fu">glm</span>(num.Quality <span class="sc">~</span> assess_percentile_na_proportion <span class="sc">+</span> assess_col_na_cropped <span class="sc">+</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>                         extract_na_cropped <span class="sc">+</span> assess_middle_na_proportion <span class="sc">+</span> assess_bottomempty_cropped <span class="sc">+</span></span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>                         assess_median_na_proportion,</span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>train, <span class="at">family=</span><span class="st">"binomial"</span>)</span>
<span id="cb145-5"><a href="#cb145-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-6"><a href="#cb145-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(crop.num.logit.model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = num.Quality ~ assess_percentile_na_proportion + 
    assess_col_na_cropped + extract_na_cropped + assess_middle_na_proportion + 
    assess_bottomempty_cropped + assess_median_na_proportion, 
    family = "binomial", data = train)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.8032  -0.1417   0.3026   0.4747   4.8743  

Coefficients: (1 not defined because of singularities)
                                  Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                      4.999e+00  3.832e-01  13.046  &lt; 2e-16 ***
assess_percentile_na_proportion -5.722e+01  7.979e+00  -7.171 7.45e-13 ***
assess_col_na_cropped           -1.259e+00  7.351e-01  -1.713   0.0868 .  
extract_na_cropped              -1.443e-01  6.806e-02  -2.121   0.0339 *  
assess_middle_na_proportion     -1.214e+01  7.367e+00  -1.649   0.0992 .  
assess_bottomempty_cropped       4.897e-04  3.586e-02   0.014   0.9891    
assess_median_na_proportion             NA         NA      NA       NA    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1693.1  on 1389  degrees of freedom
Residual deviance:  913.9  on 1384  degrees of freedom
AIC: 925.9

Number of Fisher Scoring iterations: 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(crop.num.logit.model, test, <span class="at">type=</span><span class="st">"response"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predict.lm(object, newdata, se.fit, scale = 1, type = if (type == :
prediction from a rank-deficient fit may be misleading</code></pre>
</div>
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co"># XXX Figure out followup scans</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>test[test<span class="sc">$</span>num.predictions <span class="sc">&lt;</span> <span class="fl">0.5</span> <span class="sc">&amp;</span> test<span class="sc">$</span>num.Quality <span class="sc">==</span> <span class="dv">1</span>, ]<span class="sc">$</span>followup <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>test[test<span class="sc">$</span>num.predictions <span class="sc">&gt;</span> <span class="fl">0.75</span> <span class="sc">&amp;</span> test<span class="sc">$</span>num.Quality <span class="sc">==</span> <span class="dv">0</span>, ]<span class="sc">$</span>followup <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-5"><a href="#cb149-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(test, <span class="fu">aes</span>(<span class="at">x=</span>num.Quality, <span class="at">y=</span>num.predictions)) <span class="sc">+</span></span>
<span id="cb149-6"><a href="#cb149-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb149-7"><a href="#cb149-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"True Quality"</span>) <span class="sc">+</span></span>
<span id="cb149-8"><a href="#cb149-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Probability of good scan"</span>) <span class="sc">+</span></span>
<span id="cb149-9"><a href="#cb149-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Cropped Numerical Logistic Prediction Test Data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(test, <span class="fu">aes</span>(<span class="at">x=</span>num.Quality, <span class="at">y=</span>num.predictions, <span class="at">color=</span>followup)) <span class="sc">+</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_colour_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"grey50"</span>, <span class="st">"darkorange"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-45-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The boxplot shows a general picture of the results of the model. There is a significant number of misclassified scans. Using a typical 0.5 rounding we get the confusion matrix:</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-46_a7ba8b64962cdff334b66a57ae0ca1de">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Top is true value, left is predicted</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>metrics <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(<span class="fu">factor</span>(<span class="fu">round</span>(test<span class="sc">$</span>num.predictions)),</span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>                           test<span class="sc">$</span>num.Quality, <span class="at">mode=</span><span class="st">"everything"</span>, <span class="at">positive =</span> <span class="st">"1"</span>)</span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>metrics</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   0   1
         0  98  18
         1  26 318
                                          
               Accuracy : 0.9043          
                 95% CI : (0.8737, 0.9296)
    No Information Rate : 0.7304          
    P-Value [Acc &gt; NIR] : &lt;2e-16          
                                          
                  Kappa : 0.7521          
                                          
 Mcnemar's Test P-Value : 0.2913          
                                          
            Sensitivity : 0.9464          
            Specificity : 0.7903          
         Pos Pred Value : 0.9244          
         Neg Pred Value : 0.8448          
              Precision : 0.9244          
                 Recall : 0.9464          
                     F1 : 0.9353          
             Prevalence : 0.7304          
         Detection Rate : 0.6913          
   Detection Prevalence : 0.7478          
      Balanced Accuracy : 0.8684          
                                          
       'Positive' Class : 1               
                                          </code></pre>
</div>
</div>
</section>
<section id="cropped-ordinal-random-forest" class="level3">
<h3 class="anchored" data-anchor-id="cropped-ordinal-random-forest">Cropped Ordinal Random Forest</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-47_a5071416c87066d9986a81551c5bbaaa">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>crop.ord.forest.model <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(Quality <span class="sc">~</span> assess_percentile_na_proportion <span class="sc">+</span> assess_col_na_cropped <span class="sc">+</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>                         extract_na_cropped <span class="sc">+</span> assess_middle_na_proportion <span class="sc">+</span> assess_bottomempty_cropped <span class="sc">+</span></span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>                         assess_median_na_proportion, <span class="at">data =</span> train,</span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">importance =</span> <span class="cn">TRUE</span>)</span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>Prediction <span class="ot">&lt;-</span> <span class="fu">predict</span>(crop.ord.forest.model, test)</span>
<span id="cb153-7"><a href="#cb153-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Test data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Test data"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(test<span class="sc">$</span>Quality, test<span class="sc">$</span>Prediction)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               
                Good Tiny Problems Problematic Bad Yikes
  Good            37            25           0   0     0
  Tiny Problems   21           238          10   5     0
  Problematic      0            21          17  13     0
  Bad              0             7          15  44     2
  Yikes            0             0           0   4     1</code></pre>
</div>
</div>
<p>To help compare these models, we will introduce a compression concept. Just as before, all scans will be divided into Good, which includes Good and Tiny Problems. Bad will include all other categories.</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-48_c29ee21268c38c60195bd30c3c21dbba">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions[test<span class="sc">$</span>Predictions <span class="sc">==</span> <span class="st">"Good"</span>] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions[test<span class="sc">$</span>Predictions <span class="sc">==</span> <span class="st">"Tiny Problems"</span>] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">&lt;-</span> <span class="fu">factor</span>(test<span class="sc">$</span>num.predictions, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-6"><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Top is true value, left is predicted</span></span>
<span id="cb157-7"><a href="#cb157-7" aria-hidden="true" tabindex="-1"></a>metrics <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(test<span class="sc">$</span>num.predictions,</span>
<span id="cb157-8"><a href="#cb157-8" aria-hidden="true" tabindex="-1"></a>                           test<span class="sc">$</span>num.Quality, <span class="at">mode=</span><span class="st">"everything"</span>, <span class="at">positive =</span> <span class="st">"1"</span>)</span>
<span id="cb157-9"><a href="#cb157-9" aria-hidden="true" tabindex="-1"></a>metrics</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   0   1
         0 124 336
         1   0   0
                                          
               Accuracy : 0.2696          
                 95% CI : (0.2295, 0.3126)
    No Information Rate : 0.7304          
    P-Value [Acc &gt; NIR] : 1               
                                          
                  Kappa : 0               
                                          
 Mcnemar's Test P-Value : &lt;2e-16          
                                          
            Sensitivity : 0.0000          
            Specificity : 1.0000          
         Pos Pred Value :    NaN          
         Neg Pred Value : 0.2696          
              Precision :     NA          
                 Recall : 0.0000          
                     F1 :     NA          
             Prevalence : 0.7304          
         Detection Rate : 0.0000          
   Detection Prevalence : 0.0000          
      Balanced Accuracy : 0.5000          
                                          
       'Positive' Class : 1               
                                          </code></pre>
</div>
</div>
</section>
<section id="cropped-numerical-random-forest" class="level3">
<h3 class="anchored" data-anchor-id="cropped-numerical-random-forest">Cropped Numerical Random Forest</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-49_f69efd8fb5119803720c09084e39cbca">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>crop.num.RF.model <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(num.Quality <span class="sc">~</span> assess_percentile_na_proportion <span class="sc">+</span> assess_col_na_cropped <span class="sc">+</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>                         extract_na_cropped <span class="sc">+</span> assess_middle_na_proportion <span class="sc">+</span> assess_bottomempty_cropped <span class="sc">+</span></span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a>                         assess_median_na_proportion, <span class="at">data =</span> train,</span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">importance =</span> <span class="cn">TRUE</span>)</span>
<span id="cb159-5"><a href="#cb159-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-6"><a href="#cb159-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-7"><a href="#cb159-7" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(crop.num.RF.model, test, <span class="at">type=</span><span class="st">"prob"</span>)[,<span class="dv">2</span>]</span>
<span id="cb159-8"><a href="#cb159-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-9"><a href="#cb159-9" aria-hidden="true" tabindex="-1"></a>test[test<span class="sc">$</span>num.predictions <span class="sc">&lt;</span> <span class="fl">0.5</span> <span class="sc">&amp;</span> test<span class="sc">$</span>num.Quality <span class="sc">==</span> <span class="dv">1</span>, ]<span class="sc">$</span>followup <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb159-10"><a href="#cb159-10" aria-hidden="true" tabindex="-1"></a>test[test<span class="sc">$</span>num.predictions <span class="sc">&gt;</span> <span class="fl">0.75</span> <span class="sc">&amp;</span> test<span class="sc">$</span>num.Quality <span class="sc">==</span> <span class="dv">0</span>, ]<span class="sc">$</span>followup <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb159-11"><a href="#cb159-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-12"><a href="#cb159-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(test, <span class="fu">aes</span>(<span class="at">x=</span>num.Quality, <span class="at">y=</span>num.predictions)) <span class="sc">+</span></span>
<span id="cb159-13"><a href="#cb159-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb159-14"><a href="#cb159-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"True Quality"</span>) <span class="sc">+</span></span>
<span id="cb159-15"><a href="#cb159-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Probability of good scan"</span>) <span class="sc">+</span></span>
<span id="cb159-16"><a href="#cb159-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Numerical Logistic Prediction Test Data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(test, <span class="fu">aes</span>(<span class="at">x=</span>num.Quality, <span class="at">y=</span>num.predictions, <span class="at">color=</span>followup)) <span class="sc">+</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_colour_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"grey50"</span>, <span class="st">"darkorange"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-49-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The boxplot shows a general picture of the results of the model. There is a significant number of misclassified scans. Using a typical 0.5 rounding we get the confusion matrix:</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-50_d2044f34f1e6879d43039f17a370ffd1">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Top is true value, left is predicted</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>metrics <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(<span class="fu">factor</span>(<span class="fu">round</span>(test<span class="sc">$</span>num.predictions)),</span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>                           test<span class="sc">$</span>num.Quality, <span class="at">mode=</span><span class="st">"everything"</span>, <span class="at">positive =</span> <span class="st">"1"</span>)</span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a>metrics</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   0   1
         0 101  22
         1  23 314
                                          
               Accuracy : 0.9022          
                 95% CI : (0.8713, 0.9277)
    No Information Rate : 0.7304          
    P-Value [Acc &gt; NIR] : &lt;2e-16          
                                          
                  Kappa : 0.751           
                                          
 Mcnemar's Test P-Value : 1               
                                          
            Sensitivity : 0.9345          
            Specificity : 0.8145          
         Pos Pred Value : 0.9318          
         Neg Pred Value : 0.8211          
              Precision : 0.9318          
                 Recall : 0.9345          
                     F1 : 0.9331          
             Prevalence : 0.7304          
         Detection Rate : 0.6826          
   Detection Prevalence : 0.7326          
      Balanced Accuracy : 0.8745          
                                          
       'Positive' Class : 1               
                                          </code></pre>
</div>
</div>
</section>
</section>
<section id="followup-scans" class="level2">
<h2 class="anchored" data-anchor-id="followup-scans">Followup Scans</h2>
<p>XXX todo: add standard analysis and predicted outliers XXX Consider manual g</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>