<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Heike Hofmann, Craig Orman, Naga Vempati">

<title>Scan Quality Assessor: Model Comparison</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="Model Comparison_files/libs/clipboard/clipboard.min.js"></script>
<script src="Model Comparison_files/libs/quarto-html/quarto.js"></script>
<script src="Model Comparison_files/libs/quarto-html/popper.min.js"></script>
<script src="Model Comparison_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Model Comparison_files/libs/quarto-html/anchor.min.js"></script>
<link href="Model Comparison_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Model Comparison_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Model Comparison_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Model Comparison_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Model Comparison_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a></li>
  </ul></li>
  <li><a href="#feature-analysis" id="toc-feature-analysis" class="nav-link" data-scroll-target="#feature-analysis">Feature Analysis</a>
  <ul class="collapse">
  <li><a href="#assess-percentile-na-proportion" id="toc-assess-percentile-na-proportion" class="nav-link" data-scroll-target="#assess-percentile-na-proportion">Assess Percentile NA Proportion</a></li>
  <li><a href="#assess-col-na" id="toc-assess-col-na" class="nav-link" data-scroll-target="#assess-col-na">Assess Col NA</a></li>
  <li><a href="#extract-na" id="toc-extract-na" class="nav-link" data-scroll-target="#extract-na">Extract NA</a></li>
  <li><a href="#assess-middle-na-proportion" id="toc-assess-middle-na-proportion" class="nav-link" data-scroll-target="#assess-middle-na-proportion">Assess Middle NA Proportion</a></li>
  <li><a href="#assess-rotation" id="toc-assess-rotation" class="nav-link" data-scroll-target="#assess-rotation">Assess Rotation</a></li>
  <li><a href="#assess-bottomempty" id="toc-assess-bottomempty" class="nav-link" data-scroll-target="#assess-bottomempty">Assess Bottomempty</a></li>
  <li><a href="#assess-median-na-proportion" id="toc-assess-median-na-proportion" class="nav-link" data-scroll-target="#assess-median-na-proportion">Assess Median NA Proportion</a></li>
  <li><a href="#cross-correlations" id="toc-cross-correlations" class="nav-link" data-scroll-target="#cross-correlations">Cross Correlations</a></li>
  </ul></li>
  <li><a href="#standard-model-analysis" id="toc-standard-model-analysis" class="nav-link" data-scroll-target="#standard-model-analysis">Standard Model Analysis</a>
  <ul class="collapse">
  <li><a href="#standard-multi-nomial-logistic-regression" id="toc-standard-multi-nomial-logistic-regression" class="nav-link" data-scroll-target="#standard-multi-nomial-logistic-regression">Standard Multi-Nomial Logistic Regression</a></li>
  <li><a href="#standard-binary-regression" id="toc-standard-binary-regression" class="nav-link" data-scroll-target="#standard-binary-regression">Standard Binary regression</a></li>
  <li><a href="#standard-ordinal-random-forest" id="toc-standard-ordinal-random-forest" class="nav-link" data-scroll-target="#standard-ordinal-random-forest">Standard Ordinal random forest</a></li>
  <li><a href="#standard-numerical-random-forest" id="toc-standard-numerical-random-forest" class="nav-link" data-scroll-target="#standard-numerical-random-forest">Standard Numerical Random Forest</a></li>
  <li><a href="#standard-model-results" id="toc-standard-model-results" class="nav-link" data-scroll-target="#standard-model-results">Standard Model Results</a></li>
  </ul></li>
  <li><a href="#cropped-feature-analysis" id="toc-cropped-feature-analysis" class="nav-link" data-scroll-target="#cropped-feature-analysis">Cropped Feature Analysis</a>
  <ul class="collapse">
  <li><a href="#extract-na-cropped" id="toc-extract-na-cropped" class="nav-link" data-scroll-target="#extract-na-cropped">Extract NA Cropped</a></li>
  <li><a href="#assess-bottomempty-cropped" id="toc-assess-bottomempty-cropped" class="nav-link" data-scroll-target="#assess-bottomempty-cropped">Assess Bottomempty Cropped</a></li>
  <li><a href="#assess-col-na-cropped" id="toc-assess-col-na-cropped" class="nav-link" data-scroll-target="#assess-col-na-cropped">Assess Col NA Cropped</a></li>
  <li><a href="#assess-median-na-proportion-cropped" id="toc-assess-median-na-proportion-cropped" class="nav-link" data-scroll-target="#assess-median-na-proportion-cropped">Assess Median NA Proportion Cropped</a></li>
  </ul></li>
  <li><a href="#cropped-model-analysis" id="toc-cropped-model-analysis" class="nav-link" data-scroll-target="#cropped-model-analysis">Cropped Model Analysis</a>
  <ul class="collapse">
  <li><a href="#cropped-multi-nomial-logistic-regression" id="toc-cropped-multi-nomial-logistic-regression" class="nav-link" data-scroll-target="#cropped-multi-nomial-logistic-regression">Cropped Multi-Nomial Logistic Regression</a></li>
  <li><a href="#cropped-numerical-logistic-regression" id="toc-cropped-numerical-logistic-regression" class="nav-link" data-scroll-target="#cropped-numerical-logistic-regression">Cropped Numerical Logistic Regression</a></li>
  <li><a href="#cropped-ordinal-random-forest" id="toc-cropped-ordinal-random-forest" class="nav-link" data-scroll-target="#cropped-ordinal-random-forest">Cropped Ordinal Random Forest</a></li>
  <li><a href="#cropped-numerical-random-forest" id="toc-cropped-numerical-random-forest" class="nav-link" data-scroll-target="#cropped-numerical-random-forest">Cropped Numerical Random Forest</a></li>
  <li><a href="#cropped-model-results" id="toc-cropped-model-results" class="nav-link" data-scroll-target="#cropped-model-results">Cropped Model Results</a></li>
  </ul></li>
  <li><a href="#followup-scans" id="toc-followup-scans" class="nav-link" data-scroll-target="#followup-scans">Followup Scans</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Scan Quality Assessor: Model Comparison</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Heike Hofmann, Craig Orman, Naga Vempati </p>
          </div>
  </div>
    
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This document is intended give well commented exact technical details to show the comparison of various models we tested and compared to determine the best candidate for use in a research or real-world environment.</p>
<p>We will investigate the ability of our features to predict the quality of a scan using a variety of methods. It should be noted that given our current classification system Good &gt; Tiny Problems &gt; Problematic &gt; Bad &gt; Yikes, we will consider that any scan worse than Tiny Problems should be re-scanned by the user. However, this is a tool meant to aid a user in deciding and is not to be taken as a sole source of truth.</p>
<p>Models will be broken into two classification types, ordinal and binary. In the ordinal models, we will try to accurately predict which of the five categories a scan falls into. As quality is a subjective rating, we will focus more on being within one step of the assigned rating than going for perfect agree, although perfect agreement would be optimal. In the binary setting, we will group the scans as Good (1) and Bad (0) as binary classifications are often easier. Good (1) scans will be scans currently labelled as Good or Tiny Problems, with Bad (0) scans being Problematic, Bad, and Yikes.</p>
<p>There will also be a comparison of models between using the features calculated against a full image as taken by the scanner, and a cropped image of the scan. The purpose of this is to increase the speed of the quality assurance stage, and to see if removing the ‘noise’ at the sides of the image helps to increase the estimate of quality, as our focus is on the center of the image.</p>
<ul>
<li><span style="color: red;">XXX Is there a more mathy and rigorous reason we chose these models? They are pretty much just my go-tos, and the only ones I know for categorical. Probably need to add references</span></li>
</ul>
<p>The models we will train are logistic regressions, and random forests. These models have often proven to be sufficiently explainable for forensic purposes, as well as statistically sound in many environments.</p>
<section id="results" class="level3">
<h3 class="anchored" data-anchor-id="results">Results</h3>
<ul>
<li><span style="color: red;">XXX Interpret the results</span></li>
</ul>
<table class="table">
<colgroup>
<col style="width: 46%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 18%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th>Model</th>
<th>TPR</th>
<th>TNR</th>
<th>F1 Score</th>
<th>Kappa</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Stnd Multinomial Logistic Regression</td>
<td><strong>0.9821</strong></td>
<td>0.6786</td>
<td>0.9283</td>
<td>0.7191</td>
</tr>
<tr class="even">
<td>Stnd Binary Logistic Regression</td>
<td>0.9643</td>
<td>0.7714</td>
<td>0.9364</td>
<td>0.7677</td>
</tr>
<tr class="odd">
<td>Stnd Ordinal Random Forest</td>
<td>0.9643</td>
<td>0.7714</td>
<td>0.9364</td>
<td>0.7677</td>
</tr>
<tr class="even">
<td>Stnd Binary Random Forest</td>
<td>0.9286</td>
<td><strong>0.8286</strong></td>
<td>0.9286</td>
<td>0.7571</td>
</tr>
<tr class="odd">
<td>Crop Multinomial Logistic Regression</td>
<td><strong>0.9821</strong></td>
<td>0.7</td>
<td>0.9322</td>
<td>0.7375</td>
</tr>
<tr class="even">
<td>Crop Binary Logistic Regression</td>
<td>0.9554</td>
<td>0.7929</td>
<td>0.9359</td>
<td>0.7707</td>
</tr>
<tr class="odd">
<td>Crop Ordinal Random Forest</td>
<td>0.9554</td>
<td>0.8</td>
<td><strong>0.9372</strong></td>
<td><strong>0.7764</strong></td>
</tr>
<tr class="even">
<td>Crop Binary Random Forest</td>
<td>0.9375</td>
<td><strong>0.8286</strong></td>
<td>0.9333</td>
<td>0.7709</td>
</tr>
</tbody>
</table>
<p>Data handling and type setting</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-2_48b6a080ef3d9320b559a79e570a84ed">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>full.data <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"../data/std_and_cropped_data_12_20_2022.csv"</span>, <span class="at">sep=</span><span class="st">","</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>full.data <span class="ot">&lt;-</span> full.data <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Quality =</span> <span class="fu">factor</span>(Quality, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Good"</span>, <span class="st">"Tiny Problems"</span>, <span class="st">"Problematic"</span>, <span class="st">"Bad"</span>, <span class="st">"Yikes"</span>), <span class="at">ordered =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Problem =</span> <span class="fu">factor</span>(Problem, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Good"</span>, <span class="st">"Damage"</span>, <span class="st">"Holes"</span>, <span class="st">"Feathering"</span>, <span class="st">"Rotation-Staging"</span>), <span class="at">ordered =</span> <span class="cn">FALSE</span>),</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">GoodScan =</span> Quality <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Good"</span>, <span class="st">"Tiny Problems"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>(),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">LAPD_id =</span> <span class="fu">sprintf</span>(<span class="st">"FAU%3d-B%s-L%d"</span>,FAU, Bullet, Land),</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># This is the features ran against the full image</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_percentile_na_proportion =</span> <span class="fu">as.numeric</span>(assess_percentile_na_proportion),</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_col_na =</span> <span class="fu">as.numeric</span>(assess_col_na),</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">extract_na =</span> <span class="fu">as.numeric</span>(extract_na),</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_middle_na_proportion =</span> <span class="fu">as.numeric</span>(assess_middle_na_proportion),</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_rotation =</span> <span class="fu">as.numeric</span>(assess_rotation),</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_bottomempty =</span> <span class="fu">as.numeric</span>(assess_bottomempty),</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_median_na_proportion =</span> <span class="fu">as.numeric</span>(assess_median_na_proportion),</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># This is the features ran against the cropped image</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_percentile_na_proportion_cropped =</span> <span class="fu">as.numeric</span>(assess_percentile_na_proportion_cropped),</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_col_na_cropped =</span> <span class="fu">as.numeric</span>(assess_col_na_cropped),</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">extract_na_cropped =</span> <span class="fu">as.numeric</span>(extract_na_cropped),</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_bottomempty_cropped =</span> <span class="fu">as.numeric</span>(assess_bottomempty_cropped),</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">assess_median_na_proportion_cropped =</span> <span class="fu">as.numeric</span>(assess_median_na_proportion_cropped)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>followupScans <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="feature-analysis" class="level2">
<h2 class="anchored" data-anchor-id="feature-analysis">Feature Analysis</h2>
<p>In this investigation, we are going to look at the features calculated against the full image. This investigation will tell us more about the predictive power of each feature, and tell us how different the quality categories are from each other.</p>
<ul>
<li><span style="color: red;">XXX Our results are mostly in graphical form. Should I use some kinda test? Is there a way to front load the results as with models?</span></li>
</ul>
<section id="assess-percentile-na-proportion" class="level3">
<h3 class="anchored" data-anchor-id="assess-percentile-na-proportion">Assess Percentile NA Proportion</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-4_7e60f6302f0a17817de9b65862596023">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(standard.data<span class="sc">$</span>assess_percentile_na_proportion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
0.00000 0.00331 0.01088 0.02073 0.02716 0.25525 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(standard.data, <span class="fu">aes</span>(<span class="at">x=</span>Quality, <span class="at">y=</span>assess_percentile_na_proportion)) <span class="sc">+</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Assess Percentile NA Proportion by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">glm</span>(Quality <span class="sc">~</span> assess_percentile_na_proportion,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>standard.data, <span class="at">family=</span><span class="st">"binomial"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = Quality ~ assess_percentile_na_proportion, family = "binomial", 
    data = standard.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-4.0868   0.0000   0.0104   0.2550   1.4413  

Coefficients:
                                Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                      -0.6017     0.1206  -4.991 6.02e-07 ***
assess_percentile_na_proportion 585.1354    45.1784  12.952  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1476.42  on 1849  degrees of freedom
Residual deviance:  782.01  on 1848  degrees of freedom
AIC: 786.01

Number of Fisher Scoring iterations: 10</code></pre>
</div>
</div>
<p>In the boxplot we can see that as Assess Percentile NA Proportion increases, the quality of the image decreases. The IQR of the quality categories has overlap, but the medians are consistently different in the chart. The logistic regression also shows that there is overwhelming evidence, with reservation, for this being a useful feature in explaining the quality.</p>
<ul>
<li><span style="color: red;">XXX What does the warning mean here and how do we address it?</span></li>
</ul>
</section>
<section id="assess-col-na" class="level3">
<h3 class="anchored" data-anchor-id="assess-col-na">Assess Col NA</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-5_15ffea89a7f466d70098e20bebe5dd64">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(standard.data<span class="sc">$</span>assess_col_na)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 0.2573  0.9244  1.0755  1.1654  1.2928  4.3684 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(standard.data, <span class="fu">aes</span>(<span class="at">x=</span>Quality, <span class="at">y=</span>assess_col_na)) <span class="sc">+</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Assess Col NA by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">glm</span>(Quality <span class="sc">~</span> assess_col_na,</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>standard.data, <span class="at">family=</span><span class="st">"binomial"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = Quality ~ assess_col_na, family = "binomial", data = standard.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.3488   0.1629   0.4009   0.5954   1.8298  

Coefficients:
              Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)    -2.5752     0.3593  -7.167 7.66e-13 ***
assess_col_na   4.3089     0.3727  11.563  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1476.4  on 1849  degrees of freedom
Residual deviance: 1269.5  on 1848  degrees of freedom
AIC: 1273.5

Number of Fisher Scoring iterations: 6</code></pre>
</div>
</div>
<p>In the boxplot we can see that as Assess Col NA increases, the quality of the image decreases. The IQR of the quality categories has overlap, but the medians are consistently different in the chart, with the exception of “Good” and “Tiny Problems” which are very similar. The logistic regression also shows that there is overwhelming evidence for this being a useful feature in explaining the quality.</p>
</section>
<section id="extract-na" class="level3">
<h3 class="anchored" data-anchor-id="extract-na">Extract NA</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-6_3fd68afd4010b2a5724e56a2fe1553b7">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(standard.data<span class="sc">$</span>extract_na)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  3.667  12.797  15.082  15.915  18.303  48.454 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(standard.data, <span class="fu">aes</span>(<span class="at">x=</span>Quality, <span class="at">y=</span>extract_na)) <span class="sc">+</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Extract NA by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">glm</span>(Quality <span class="sc">~</span> extract_na,</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>standard.data, <span class="at">family=</span><span class="st">"binomial"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = Quality ~ extract_na, family = "binomial", data = standard.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.6889   0.1483   0.3688   0.5775   1.9821  

Coefficients:
            Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept) -3.09877    0.36353  -8.524   &lt;2e-16 ***
extract_na   0.35060    0.02753  12.736   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1476.4  on 1849  degrees of freedom
Residual deviance: 1226.7  on 1848  degrees of freedom
AIC: 1230.7

Number of Fisher Scoring iterations: 6</code></pre>
</div>
</div>
<p>In the boxplot we can see that as Extract NA increases, the quality of the image decreases. The IQR of the quality categories has overlap, but the medians are consistently different in the chart. The logistic regression also shows that there is overwhelming evidence for this being a useful feature in explaining the quality.</p>
</section>
<section id="assess-middle-na-proportion" class="level3">
<h3 class="anchored" data-anchor-id="assess-middle-na-proportion">Assess Middle NA Proportion</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-7_90032a339edcf34a472a2c2e7a256f9c">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(standard.data<span class="sc">$</span>assess_middle_na_proportion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
0.0002776 0.0221251 0.0392280 0.0517308 0.0688228 0.3851669 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(standard.data, <span class="fu">aes</span>(<span class="at">x=</span>Quality, <span class="at">y=</span>assess_middle_na_proportion)) <span class="sc">+</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Assess Middle NA Proportion by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">glm</span>(Quality <span class="sc">~</span> assess_middle_na_proportion,</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>standard.data, <span class="at">family=</span><span class="st">"binomial"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = Quality ~ assess_middle_na_proportion, family = "binomial", 
    data = standard.data)

Deviance Residuals: 
     Min        1Q    Median        3Q       Max  
-2.72629   0.03616   0.24091   0.58568   1.34175  

Coefficients:
                            Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                  -0.4164     0.1454  -2.864  0.00419 ** 
assess_middle_na_proportion  73.9873     5.7409  12.888  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1476.4  on 1849  degrees of freedom
Residual deviance: 1115.6  on 1848  degrees of freedom
AIC: 1119.6

Number of Fisher Scoring iterations: 7</code></pre>
</div>
</div>
<p>In the boxplot we can see that as Extract NA increases, the quality of the image decreases. The IQR of the quality categories has overlap, but the medians are consistently different in the chart. The logistic regression also shows that there is overwhelming evidence for this being a useful feature in explaining the quality.</p>
</section>
<section id="assess-rotation" class="level3">
<h3 class="anchored" data-anchor-id="assess-rotation">Assess Rotation</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-8_39945ec1487ba61ea373cc87ae523e8e">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(standard.data<span class="sc">$</span>assess_rotation)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 0.0000  0.3143  0.6904  1.0279  1.4601  4.9878 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(standard.data, <span class="fu">aes</span>(<span class="at">x=</span>Quality, <span class="at">y=</span>assess_rotation)) <span class="sc">+</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Assess Rotation by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">glm</span>(Quality <span class="sc">~</span> assess_rotation,</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>standard.data, <span class="at">family=</span><span class="st">"binomial"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = Quality ~ assess_rotation, family = "binomial", 
    data = standard.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.0678   0.5270   0.5443   0.5507   0.5555  

Coefficients:
                Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)      1.79066    0.09775  18.319   &lt;2e-16 ***
assess_rotation  0.05131    0.07105   0.722     0.47    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1476.4  on 1849  degrees of freedom
Residual deviance: 1475.9  on 1848  degrees of freedom
AIC: 1479.9

Number of Fisher Scoring iterations: 4</code></pre>
</div>
</div>
<p>In the boxplot, we see that there is no significant visual difference in median or IQR of Assess Rotation when grouped by Quality. The logistic regression shows no evidence that this feature can help explain the quality of an image. This feature was primarily intended for use in predicting a particular problem that occurs in scans.</p>
</section>
<section id="assess-bottomempty" class="level3">
<h3 class="anchored" data-anchor-id="assess-bottomempty">Assess Bottomempty</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-9_500b684412f477c0c904c313e77eae46">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(standard.data<span class="sc">$</span>assess_bottomempty)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  8.516  22.669  27.540  29.903  34.634  95.394 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(standard.data, <span class="fu">aes</span>(<span class="at">x=</span>Quality, <span class="at">y=</span>assess_bottomempty)) <span class="sc">+</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Assess Bottomempty by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">glm</span>(Quality <span class="sc">~</span> assess_bottomempty,</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>standard.data, <span class="at">family=</span><span class="st">"binomial"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = Quality ~ assess_bottomempty, family = "binomial", 
    data = standard.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.4871   0.2807   0.4750   0.6070   1.0997  

Coefficients:
                    Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)        -0.577479   0.258462  -2.234   0.0255 *  
assess_bottomempty  0.089585   0.009999   8.960   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1476.4  on 1849  degrees of freedom
Residual deviance: 1368.4  on 1848  degrees of freedom
AIC: 1372.4

Number of Fisher Scoring iterations: 5</code></pre>
</div>
</div>
<p>In the boxplot we can see that as Assess Bottomempty increases, the quality of the image decreases. The IQR of the quality categories has overlap, but the medians are consistently different in the chart. There is an observation of note that the Yikes category has a particularly large IQR. The logistic regression also shows that there is overwhelming evidence for this being a useful feature in explaining the quality.</p>
</section>
<section id="assess-median-na-proportion" class="level3">
<h3 class="anchored" data-anchor-id="assess-median-na-proportion">Assess Median NA Proportion</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-10_cbf28a19cdc99c11601efd924931ca87">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(standard.data<span class="sc">$</span>assess_median_na_proportion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
0.00000 0.00331 0.01088 0.02073 0.02716 0.25525 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(standard.data, <span class="fu">aes</span>(<span class="at">x=</span>Quality, <span class="at">y=</span>assess_median_na_proportion)) <span class="sc">+</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Assess Median NA Proportion by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">glm</span>(Quality <span class="sc">~</span> assess_median_na_proportion,</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>standard.data, <span class="at">family=</span><span class="st">"binomial"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = Quality ~ assess_median_na_proportion, family = "binomial", 
    data = standard.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-4.0868   0.0000   0.0104   0.2550   1.4413  

Coefficients:
                            Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                  -0.6017     0.1206  -4.991 6.02e-07 ***
assess_median_na_proportion 585.1354    45.1784  12.952  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1476.42  on 1849  degrees of freedom
Residual deviance:  782.01  on 1848  degrees of freedom
AIC: 786.01

Number of Fisher Scoring iterations: 10</code></pre>
</div>
</div>
<p>In the boxplot we can see that as Assess Median NA Proportion increases, the quality of the image decreases. The IQR of the quality categories has overlap, but the medians are consistently different in the chart. The “Bad” and “Yikes” categories have very similar IQR and Medians. The logistic regression also shows that there is overwhelming evidence, with reservation, for this being a useful feature in explaining the quality.</p>
</section>
<section id="cross-correlations" class="level3">
<h3 class="anchored" data-anchor-id="cross-correlations">Cross Correlations</h3>
<ul>
<li><span style="color: red;">XXX include https://heike.github.io/ggpcp/ and a scatterplot of the data</span></li>
</ul>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-11_35de8194169baf38e49858f30f3e58ce">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>correlations <span class="ot">&lt;-</span> <span class="fu">cor</span>(standard.data[,<span class="dv">6</span><span class="sc">:</span><span class="dv">12</span>])</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(correlations, <span class="at">method =</span> <span class="st">"shade"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>There is significant correlation between most of the variables except assess rotation.</p>
</section>
</section>
<section id="standard-model-analysis" class="level2">
<h2 class="anchored" data-anchor-id="standard-model-analysis">Standard Model Analysis</h2>
<table class="table">
<colgroup>
<col style="width: 54%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 15%">
<col style="width: 9%">
</colgroup>
<thead>
<tr class="header">
<th>Model</th>
<th>TPR</th>
<th>TNR</th>
<th>F1 Score</th>
<th>Kappa</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Stnd Multinomial Logistic Regression</td>
<td>0.9821</td>
<td>0.6786</td>
<td>0.9283</td>
<td>0.7191</td>
</tr>
<tr class="even">
<td>Stnd Binary Logistic Regression</td>
<td>0.9643</td>
<td>0.7714</td>
<td>0.9364</td>
<td>0.7677</td>
</tr>
<tr class="odd">
<td>Stnd Ordinal Random Forest</td>
<td>0.9643</td>
<td>0.7714</td>
<td>0.9364</td>
<td>0.7677</td>
</tr>
<tr class="even">
<td>Stnd Binary Random Forest</td>
<td>0.9286</td>
<td>0.8286</td>
<td>0.9286</td>
<td>0.7571</td>
</tr>
</tbody>
</table>
<p>Metric Function that provides our results:</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-12_737d5d4fefb4a6739305bd84887cc053">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function intended to standardize outputs a bit better</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>numerical.Metrics <span class="ot">&lt;-</span> <span class="cf">function</span>(test, modelName) {</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  metrics <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(<span class="fu">factor</span>(<span class="fu">round</span>(test<span class="sc">$</span>num.predictions), <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)),</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>                             test<span class="sc">$</span>num.Quality, <span class="at">mode=</span><span class="st">"everything"</span>, <span class="at">positive =</span> <span class="st">"1"</span>)</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(metrics)</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#returns c(modelName, TPR, TNR, F1, Kappa)</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">c</span>(modelName, <span class="fu">round</span>(metrics<span class="sc">$</span>byClass[<span class="dv">1</span>], <span class="dv">4</span>), <span class="fu">round</span>(metrics<span class="sc">$</span>byClass[<span class="dv">2</span>], <span class="dv">4</span>), </span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>           <span class="fu">round</span>(metrics<span class="sc">$</span>byClass[<span class="dv">7</span>], <span class="dv">4</span>), <span class="fu">round</span>(metrics<span class="sc">$</span>overall[<span class="dv">2</span>], <span class="dv">4</span>)))</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Creation of the training and test data.</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-13_a072246cb0fd2d5b484428f29e8366c1">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>sample <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="fu">nrow</span>(standard.data), <span class="at">replace=</span><span class="cn">TRUE</span>, <span class="at">prob=</span><span class="fu">c</span>(<span class="fl">0.75</span>,<span class="fl">0.25</span>))</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>train  <span class="ot">&lt;-</span> standard.data[sample, ]</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>test   <span class="ot">&lt;-</span> standard.data[<span class="sc">!</span>sample, ]</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>followup <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>num.Quality <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>num.Quality[train<span class="sc">$</span>Quality <span class="sc">==</span> <span class="st">"Good"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>num.Quality[train<span class="sc">$</span>Quality <span class="sc">==</span> <span class="st">"Tiny Problems"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>train<span class="sc">$</span>num.Quality <span class="ot">&lt;-</span> <span class="fu">factor</span>(train<span class="sc">$</span>num.Quality, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>followup <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.Quality <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.Quality[test<span class="sc">$</span>Quality <span class="sc">==</span> <span class="st">"Good"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.Quality[test<span class="sc">$</span>Quality <span class="sc">==</span> <span class="st">"Tiny Problems"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.Quality <span class="ot">&lt;-</span> <span class="fu">factor</span>(test<span class="sc">$</span>num.Quality, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">table</span>(standard.data<span class="sc">$</span>Quality, standard.data<span class="sc">$</span>Problem),</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>             <span class="at">caption =</span> <span class="st">"Full Data Problem by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Full Data Problem by Quality</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Good</th>
<th style="text-align: right;">Damage</th>
<th style="text-align: right;">Holes</th>
<th style="text-align: right;">Feathering</th>
<th style="text-align: right;">Rotation-Staging</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Good</td>
<td style="text-align: right;">253</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tiny Problems</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">991</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Problematic</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">235</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bad</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">64</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">179</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Yikes</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">table</span>(train<span class="sc">$</span>Quality, train<span class="sc">$</span>Problem), <span class="at">caption =</span> <span class="st">"Train Problem by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Train Problem by Quality</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Good</th>
<th style="text-align: right;">Damage</th>
<th style="text-align: right;">Holes</th>
<th style="text-align: right;">Feathering</th>
<th style="text-align: right;">Rotation-Staging</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Good</td>
<td style="text-align: right;">194</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tiny Problems</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">762</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Problematic</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">175</td>
<td style="text-align: right;">11</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bad</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">47</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">140</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Yikes</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">table</span>(test<span class="sc">$</span>Quality, test<span class="sc">$</span>Problem), <span class="at">caption =</span> <span class="st">"Test Problem by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Test Problem by Quality</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Good</th>
<th style="text-align: right;">Damage</th>
<th style="text-align: right;">Holes</th>
<th style="text-align: right;">Feathering</th>
<th style="text-align: right;">Rotation-Staging</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Good</td>
<td style="text-align: right;">59</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tiny Problems</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">229</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Problematic</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bad</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">39</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Yikes</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">table</span>(train<span class="sc">$</span>num.Quality), <span class="at">caption =</span> <span class="st">"Train Numeric Quality Totals"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Train Numeric Quality Totals</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Var1</th>
<th style="text-align: right;">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: right;">408</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: right;">1008</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">table</span>(train<span class="sc">$</span>num.Quality, train<span class="sc">$</span>Problem), <span class="at">caption =</span> <span class="st">"Train Numeric Problem by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Train Numeric Problem by Quality</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Good</th>
<th style="text-align: right;">Damage</th>
<th style="text-align: right;">Holes</th>
<th style="text-align: right;">Feathering</th>
<th style="text-align: right;">Rotation-Staging</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">51</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">328</td>
<td style="text-align: right;">19</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: right;">194</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">762</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">6</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">table</span>(test<span class="sc">$</span>num.Quality), <span class="at">caption =</span> <span class="st">"Test Numeric Quality Totals"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Test Numeric Quality Totals</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Var1</th>
<th style="text-align: right;">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: right;">130</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: right;">304</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">table</span>(test<span class="sc">$</span>num.Quality, test<span class="sc">$</span>Problem), <span class="at">caption =</span> <span class="st">"Test Numeric Problem by Quality"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Test Numeric Problem by Quality</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Good</th>
<th style="text-align: right;">Damage</th>
<th style="text-align: right;">Holes</th>
<th style="text-align: right;">Feathering</th>
<th style="text-align: right;">Rotation-Staging</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">104</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: right;">59</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">229</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>model.metrics.all <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="fu">matrix</span>(<span class="at">ncol=</span><span class="dv">5</span>))</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(model.metrics.all) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Model"</span>, <span class="st">"TPR"</span>, <span class="st">"TNR"</span>, <span class="st">"F1"</span>, <span class="st">"Kappa"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="standard-multi-nomial-logistic-regression" class="level3">
<h3 class="anchored" data-anchor-id="standard-multi-nomial-logistic-regression">Standard Multi-Nomial Logistic Regression</h3>
<p>XXX MultiNomial Model! XXX Why does it label everything as bad only when we render?</p>
<p>The assumptions of the multinomial logisitic regression are: - Nominal dependent variable: Not met - No multi-colinearity: - Linear relationship: - No outlier or high influence points:</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-14_b9e3f0b7ce179c97603d448e8b6bfb1f">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>train.mutli <span class="ot">=</span> train</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>train.mutli<span class="sc">$</span>Quality <span class="ot">&lt;-</span> <span class="fu">factor</span>(train.mutli<span class="sc">$</span>Quality, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"Good"</span>, <span class="st">"Tiny Problems"</span>, <span class="st">"Problematic"</span>, <span class="st">"Bad"</span>, <span class="st">"Yikes"</span>), <span class="at">ordered =</span> <span class="cn">FALSE</span>)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>train.mutli<span class="sc">$</span>Quality <span class="ot">&lt;-</span> <span class="fu">relevel</span>(train.mutli<span class="sc">$</span>Quality, <span class="at">ref =</span> <span class="st">"Good"</span>)</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>multi.model <span class="ot">&lt;-</span> <span class="fu">multinom</span>(Quality <span class="sc">~</span> assess_percentile_na_proportion <span class="sc">+</span> assess_col_na <span class="sc">+</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>                         extract_na <span class="sc">+</span> assess_middle_na_proportion <span class="sc">+</span> assess_bottomempty <span class="sc">+</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>                         assess_median_na_proportion, <span class="at">data =</span> train.mutli)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># weights:  40 (28 variable)
initial  value 2278.964084 
iter  10 value 1532.981843
iter  20 value 1190.075208
iter  30 value 1053.041033
iter  40 value 1001.119671
iter  50 value 986.667634
iter  60 value 981.691049
iter  70 value 981.240972
iter  80 value 977.926799
iter  90 value 974.691850
iter 100 value 972.954719
final  value 972.954719 
stopped after 100 iterations</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(multi.model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
multinom(formula = Quality ~ assess_percentile_na_proportion + 
    assess_col_na + extract_na + assess_middle_na_proportion + 
    assess_bottomempty + assess_median_na_proportion, data = train.mutli)

Coefficients:
              (Intercept) assess_percentile_na_proportion assess_col_na
Tiny Problems    2.704384                        138.3027      3.676547
Problematic     -1.261561                        153.3632      5.686053
Bad             -4.195199                        170.9479      6.420542
Yikes           -9.680671                        175.2182      8.531092
               extract_na assess_middle_na_proportion assess_bottomempty
Tiny Problems  0.03862907                    164.2340         -0.4176745
Problematic    0.04796595                    203.4786         -0.5016824
Bad            0.05373007                    205.1329         -0.5016471
Yikes         -0.08868975                    193.7194         -0.4316937
              assess_median_na_proportion
Tiny Problems                    138.3027
Problematic                      153.3632
Bad                              170.9479
Yikes                            175.2182

Std. Errors:
              (Intercept) assess_percentile_na_proportion assess_col_na
Tiny Problems   0.6584012                        3.866777     0.9611797
Problematic     0.8709932                        2.965673     1.1901016
Bad             1.0506742                        2.989553     1.2886095
Yikes           1.6364762                        3.571736     1.5960902
              extract_na assess_middle_na_proportion assess_bottomempty
Tiny Problems 0.06931489                    7.308776         0.03060879
Problematic   0.08891340                    6.189048         0.03260586
Bad           0.10017929                    7.711831         0.03599654
Yikes         0.17188314                    2.161171         0.04930430
              assess_median_na_proportion
Tiny Problems                    3.866777
Problematic                      2.965673
Bad                              2.989553
Yikes                            3.571736

Residual Deviance: 1945.909 
AIC: 1993.909 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>Predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(multi.model, test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To help compare these models, we will introduce a compression concept. Just as before, all scans will be divided into Good, which includes Good and Tiny Problems. Bad will include all other categories.</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-15_9f6d1d52e4b09d7f4b16670d5dbca27a">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions[test<span class="sc">$</span>Predictions <span class="sc">==</span> <span class="st">"Good"</span>] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions[test<span class="sc">$</span>Predictions <span class="sc">==</span> <span class="st">"Tiny Problems"</span>] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>model.metrics.all <span class="ot">&lt;-</span> <span class="fu">rbind</span>(model.metrics.all, <span class="fu">numerical.Metrics</span>(test, <span class="st">"Stnd Multi Log Reg"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   0   1
         0  84   7
         1  46 297
                                          
               Accuracy : 0.8779          
                 95% CI : (0.8433, 0.9072)
    No Information Rate : 0.7005          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.6817          
                                          
 Mcnemar's Test P-Value : 1.792e-07       
                                          
            Sensitivity : 0.9770          
            Specificity : 0.6462          
         Pos Pred Value : 0.8659          
         Neg Pred Value : 0.9231          
              Precision : 0.8659          
                 Recall : 0.9770          
                     F1 : 0.9181          
             Prevalence : 0.7005          
         Detection Rate : 0.6843          
   Detection Prevalence : 0.7903          
      Balanced Accuracy : 0.8116          
                                          
       'Positive' Class : 1               
                                          </code></pre>
</div>
</div>
</section>
<section id="standard-binary-regression" class="level3">
<h3 class="anchored" data-anchor-id="standard-binary-regression">Standard Binary regression</h3>
<ul>
<li>(Good/Tiny = 1, Problematic/Bad/Yikes = 0)</li>
</ul>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-16_e3fffea1e2d2ec3bcb177bb8df4213b7">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>num.logit.model <span class="ot">&lt;-</span> <span class="fu">glm</span>(num.Quality <span class="sc">~</span> assess_percentile_na_proportion <span class="sc">+</span> assess_col_na <span class="sc">+</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>                         extract_na <span class="sc">+</span> assess_middle_na_proportion <span class="sc">+</span> assess_bottomempty <span class="sc">+</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>                         assess_median_na_proportion,</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>train, <span class="at">family=</span><span class="st">"binomial"</span>)</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(num.logit.model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = num.Quality ~ assess_percentile_na_proportion + 
    assess_col_na + extract_na + assess_middle_na_proportion + 
    assess_bottomempty + assess_median_na_proportion, family = "binomial", 
    data = train)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.8272  -0.0928   0.2885   0.4516   3.8148  

Coefficients: (1 not defined because of singularities)
                                 Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                       4.33863    0.66852   6.490 8.59e-11 ***
assess_percentile_na_proportion -45.68310   10.47690  -4.360 1.30e-05 ***
assess_col_na                    -2.00321    0.68468  -2.926 0.003436 ** 
extract_na                       -0.02821    0.05589  -0.505 0.613798    
assess_middle_na_proportion     -41.59729   11.41217  -3.645 0.000267 ***
assess_bottomempty                0.08773    0.02911   3.013 0.002585 ** 
assess_median_na_proportion            NA         NA      NA       NA    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1700.54  on 1415  degrees of freedom
Residual deviance:  866.04  on 1410  degrees of freedom
AIC: 878.04

Number of Fisher Scoring iterations: 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(num.logit.model, test, <span class="at">type=</span><span class="st">"response"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predict.lm(object, newdata, se.fit, scale = 1, type = if (type == :
prediction from a rank-deficient fit may be misleading</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># XXX Figure out followup scans</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>test[test<span class="sc">$</span>num.predictions <span class="sc">&lt;</span> <span class="fl">0.5</span> <span class="sc">&amp;</span> test<span class="sc">$</span>num.Quality <span class="sc">==</span> <span class="dv">1</span>, ]<span class="sc">$</span>followup <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>test[test<span class="sc">$</span>num.predictions <span class="sc">&gt;</span> <span class="fl">0.75</span> <span class="sc">&amp;</span> test<span class="sc">$</span>num.Quality <span class="sc">==</span> <span class="dv">0</span>, ]<span class="sc">$</span>followup <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(test, <span class="fu">aes</span>(<span class="at">x=</span>num.Quality, <span class="at">y=</span>num.predictions)) <span class="sc">+</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"True Quality"</span>) <span class="sc">+</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Probability of good scan"</span>) <span class="sc">+</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Numerical Logistic Prediction Test Data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(test, <span class="fu">aes</span>(<span class="at">x=</span>num.Quality, <span class="at">y=</span>num.predictions, <span class="at">color=</span>followup)) <span class="sc">+</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_colour_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"grey50"</span>, <span class="st">"darkorange"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-16-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The boxplot shows a general picture of the results of the model. There is a significant number of misclassified scans. Using a typical 0.5 rounding we get the confusion matrix:</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-17_29ffd8af4ee092253f7a6b5ecf1e81dd">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>model.metrics.all <span class="ot">&lt;-</span> <span class="fu">rbind</span>(model.metrics.all, <span class="fu">numerical.Metrics</span>(test, <span class="st">"Stnd Binary Log Reg"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   0   1
         0  97  11
         1  33 293
                                          
               Accuracy : 0.8986          
                 95% CI : (0.8663, 0.9254)
    No Information Rate : 0.7005          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.7461          
                                          
 Mcnemar's Test P-Value : 0.001546        
                                          
            Sensitivity : 0.9638          
            Specificity : 0.7462          
         Pos Pred Value : 0.8988          
         Neg Pred Value : 0.8981          
              Precision : 0.8988          
                 Recall : 0.9638          
                     F1 : 0.9302          
             Prevalence : 0.7005          
         Detection Rate : 0.6751          
   Detection Prevalence : 0.7512          
      Balanced Accuracy : 0.8550          
                                          
       'Positive' Class : 1               
                                          </code></pre>
</div>
</div>
</section>
<section id="standard-ordinal-random-forest" class="level3">
<h3 class="anchored" data-anchor-id="standard-ordinal-random-forest">Standard Ordinal random forest</h3>
<p>XXX is this an ordinal random forest or just a categorical one?</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-18_2962169f9596cd578d2866473003d8ab">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>ord.forest.model <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(Quality <span class="sc">~</span> assess_percentile_na_proportion <span class="sc">+</span> assess_col_na <span class="sc">+</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>                         extract_na <span class="sc">+</span> assess_middle_na_proportion <span class="sc">+</span> assess_bottomempty <span class="sc">+</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>                         assess_median_na_proportion, <span class="at">data =</span> train,</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">importance =</span> <span class="cn">TRUE</span>)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>Prediction <span class="ot">&lt;-</span> <span class="fu">predict</span>(ord.forest.model, test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To help compare these models, we once again use the previous compression metrics.</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-19_f4875636ac14e28b50de66706c989485">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>model.metrics.all <span class="ot">&lt;-</span> <span class="fu">rbind</span>(model.metrics.all, <span class="fu">numerical.Metrics</span>(test, <span class="st">"Stnd Ord Rand For"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   0   1
         0  97  11
         1  33 293
                                          
               Accuracy : 0.8986          
                 95% CI : (0.8663, 0.9254)
    No Information Rate : 0.7005          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.7461          
                                          
 Mcnemar's Test P-Value : 0.001546        
                                          
            Sensitivity : 0.9638          
            Specificity : 0.7462          
         Pos Pred Value : 0.8988          
         Neg Pred Value : 0.8981          
              Precision : 0.8988          
                 Recall : 0.9638          
                     F1 : 0.9302          
             Prevalence : 0.7005          
         Detection Rate : 0.6751          
   Detection Prevalence : 0.7512          
      Balanced Accuracy : 0.8550          
                                          
       'Positive' Class : 1               
                                          </code></pre>
</div>
</div>
</section>
<section id="standard-numerical-random-forest" class="level3">
<h3 class="anchored" data-anchor-id="standard-numerical-random-forest">Standard Numerical Random Forest</h3>
<ul>
<li>(Good/Tiny = 1, Problematic/Bad/Yikes = 0)</li>
<li>(Good = 1, Yikes = 0, drop others)</li>
</ul>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-20_95e40939c369d33c723b821d231d35bc">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>num.RF.model <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(num.Quality <span class="sc">~</span> assess_percentile_na_proportion <span class="sc">+</span> assess_col_na <span class="sc">+</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>                         extract_na <span class="sc">+</span> assess_middle_na_proportion <span class="sc">+</span> assess_bottomempty <span class="sc">+</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>                         assess_median_na_proportion, <span class="at">data =</span> train,</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">importance =</span> <span class="cn">TRUE</span>)</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(num.RF.model, test, <span class="at">type=</span><span class="st">"prob"</span>)[,<span class="dv">2</span>]</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>test[test<span class="sc">$</span>num.predictions <span class="sc">&lt;</span> <span class="fl">0.5</span> <span class="sc">&amp;</span> test<span class="sc">$</span>num.Quality <span class="sc">==</span> <span class="dv">1</span>, ]<span class="sc">$</span>followup <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>test[test<span class="sc">$</span>num.predictions <span class="sc">&gt;</span> <span class="fl">0.75</span> <span class="sc">&amp;</span> test<span class="sc">$</span>num.Quality <span class="sc">==</span> <span class="dv">0</span>, ]<span class="sc">$</span>followup <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(test, <span class="fu">aes</span>(<span class="at">x=</span>num.Quality, <span class="at">y=</span>num.predictions)) <span class="sc">+</span></span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"True Quality"</span>) <span class="sc">+</span></span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Probability of good scan"</span>) <span class="sc">+</span></span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Numerical Logistic Prediction Test Data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(test, <span class="fu">aes</span>(<span class="at">x=</span>num.Quality, <span class="at">y=</span>num.predictions, <span class="at">color=</span>followup)) <span class="sc">+</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_colour_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"grey50"</span>, <span class="st">"darkorange"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-20-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The boxplot shows a general picture of the results of the model. There is a significant number of misclassified scans. Using a typical 0.5 rounding we get the confusion matrix:</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-21_8430d43d71baa0b4afc85e5b96cec891">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>model.metrics.all <span class="ot">&lt;-</span> <span class="fu">rbind</span>(model.metrics.all, <span class="fu">numerical.Metrics</span>(test, <span class="st">"Stnd Binary Rand For"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   0   1
         0 100  21
         1  30 283
                                          
               Accuracy : 0.8825          
                 95% CI : (0.8484, 0.9112)
    No Information Rate : 0.7005          
    P-Value [Acc &gt; NIR] : &lt;2e-16          
                                          
                  Kappa : 0.7143          
                                          
 Mcnemar's Test P-Value : 0.2626          
                                          
            Sensitivity : 0.9309          
            Specificity : 0.7692          
         Pos Pred Value : 0.9042          
         Neg Pred Value : 0.8264          
              Precision : 0.9042          
                 Recall : 0.9309          
                     F1 : 0.9173          
             Prevalence : 0.7005          
         Detection Rate : 0.6521          
   Detection Prevalence : 0.7212          
      Balanced Accuracy : 0.8501          
                                          
       'Positive' Class : 1               
                                          </code></pre>
</div>
</div>
</section>
<section id="standard-model-results" class="level3">
<h3 class="anchored" data-anchor-id="standard-model-results">Standard Model Results</h3>
</section>
</section>
<section id="cropped-feature-analysis" class="level2">
<h2 class="anchored" data-anchor-id="cropped-feature-analysis">Cropped Feature Analysis</h2>
<section id="hypothesis" class="level4">
<h4 class="anchored" data-anchor-id="hypothesis">Hypothesis</h4>
<p>The quality of our images predicted by the models and assessed by our algorithms is dependent on the how much of the data from the scan is legible and useful. The bottom middle of the bullet gives us the most information, due to the striations in this area being most prominent. Some scans get distorted due to numerous external factors ranging from a bad scan to the bullet undergoing damages that’s affected those striations. Cropping our scans to cut off parts of the scan that are non-essential could help to eliminate the ‘noise’ around the images that skew the accuracy of the results. The goal is to see whether making a crop will improve the accuracy of our models.</p>
</section>
<section id="process" class="level4">
<h4 class="anchored" data-anchor-id="process">Process</h4>
<p>To conduct our analysis, we did a series of tests to compare the cropped version of a scan against the full version. We constructed scatter and box plots as well as ROC curves for visual analysis. We trained a Generalized Linear Model (glm) to test the p values, or importance, of each variable in explaining the quality, and constructed kernel density graphs to compare the scans. Every cropped scan and its full scan counterpart were found to have more than 90% correlation with each other, requiring us to use only one of them for each feature to avoid co-linearity issues.</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-23_43944ade98d9f8e8abea6f84e3bc0ae7">
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 31%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 17%">
<col style="width: 10%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">Correlation</th>
<th style="text-align: left;">pvalue_Full</th>
<th style="text-align: left;">pvalue_cropped</th>
<th style="text-align: left;">auc_Full</th>
<th style="text-align: left;">auc_Cropped</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Extract NA</td>
<td style="text-align: left;">0.908</td>
<td style="text-align: left;">0.229</td>
<td style="text-align: left;">&lt;2e-16</td>
<td style="text-align: left;">0.871</td>
<td style="text-align: left;">0.902</td>
</tr>
<tr class="even">
<td style="text-align: left;">Assess Bottomempty</td>
<td style="text-align: left;">0.905</td>
<td style="text-align: left;">5.86e-10</td>
<td style="text-align: left;">&lt;2e-16</td>
<td style="text-align: left;">0.783</td>
<td style="text-align: left;">0.859</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Assess Col NA</td>
<td style="text-align: left;">0.919</td>
<td style="text-align: left;">1.62e-06</td>
<td style="text-align: left;">1.17e-14</td>
<td style="text-align: left;">0.888</td>
<td style="text-align: left;">0.896</td>
</tr>
<tr class="even">
<td style="text-align: left;">Assess Median NA Proportion</td>
<td style="text-align: left;">0.908</td>
<td style="text-align: left;">&lt;2e-16</td>
<td style="text-align: left;">6.77e-10</td>
<td style="text-align: left;">0.907</td>
<td style="text-align: left;">0.863</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="extract-na-cropped" class="level3">
<h3 class="anchored" data-anchor-id="extract-na-cropped">Extract NA Cropped</h3>
<section id="which-of-the-features-is-better-for-discriminating-between-good-and-bad-scans" class="level4">
<h4 class="anchored" data-anchor-id="which-of-the-features-is-better-for-discriminating-between-good-and-bad-scans">Which of the features is better for discriminating between good and bad scans?</h4>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-24_ee8188739e7a4604b581d5a3d42a6103">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Returning more (or less) than 1 row per `summarise()` group was deprecated in
dplyr 1.1.0.
ℹ Please use `reframe()` instead.
ℹ When switching from `summarise()` to `reframe()`, remember that `reframe()`
  always returns an ungrouped data frame and adjust accordingly.
ℹ The deprecated feature was likely used in the yardstick package.
  Please report the issue at &lt;https://github.com/tidymodels/yardstick/issues&gt;.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-24-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-24-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Extract NA. Correlation:  0.908 Full AUC: 0.871 Cropped AUC:  0.902"</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Summary Info of Extract NA</caption>
<colgroup>
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 13%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">firstQ</th>
<th style="text-align: right;">med</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">thirdQ</th>
<th style="text-align: right;">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Standard</td>
<td style="text-align: right;">3.666645</td>
<td style="text-align: right;">12.79727</td>
<td style="text-align: right;">15.082281</td>
<td style="text-align: right;">15.915471</td>
<td style="text-align: right;">18.30296</td>
<td style="text-align: right;">48.45372</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cropped</td>
<td style="text-align: right;">1.389464</td>
<td style="text-align: right;">6.38338</td>
<td style="text-align: right;">8.060005</td>
<td style="text-align: right;">8.916349</td>
<td style="text-align: right;">10.57698</td>
<td style="text-align: right;">40.80471</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="should-we-use-features-from-just-one-type-of-scan-or-both" class="level4">
<h4 class="anchored" data-anchor-id="should-we-use-features-from-just-one-type-of-scan-or-both">Should we use features from just one type of scan or both?</h4>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-25_ec3af1189056c33660c679405848af94">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = GoodScan ~ extract_na + extract_na_cropped, family = binomial(), 
    data = full.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-3.1882  -0.2394   0.3044   0.5298   4.0795  

Coefficients:
                   Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)         7.16247    0.37858  18.919   &lt;2e-16 ***
extract_na         -0.04349    0.03613  -1.204    0.229    
extract_na_cropped -0.58303    0.05020 -11.615   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 2230.6  on 1849  degrees of freedom
Residual deviance: 1299.2  on 1847  degrees of freedom
AIC: 1305.2

Number of Fisher Scoring iterations: 6</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="conclusion-for-extract-na" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-for-extract-na">Conclusion for Extract NA</h4>
<p>The values for feature <code>extract_NA</code> are highly correlated between the cropped and the full scan.</p>
<p>Using good and scans with only tiny problems as overall ‘good’ scans, the feature applied to cropped scans has an increased accuracy compared to the feature values from the full scan.</p>
<p>We might want to follow up on the orange colored scans:</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-26_51b28b4255d5bb899bdecfb5af5285a4">
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-27_6c87ecc60324556c25416ed242dad3cf">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>full.data<span class="sc">$</span>LAPD_id[full.data<span class="sc">$</span>followup]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "FAU263-BA-L4" "FAU263-BC-L1" "FAU263-BC-L3" "FAU287-BC-L5" "FAU154-BD-L2"
[6] "FAU277-BA-L4" "FAU286-BA-L5"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>followupScans <span class="ot">&lt;-</span> <span class="fu">rbind</span>(followupScans, full.data[full.data<span class="sc">$</span>followup <span class="sc">==</span> <span class="cn">TRUE</span>,])</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="co"># All followups for extract_na are mislabelled scans. They are all labelled as tiny problems but should be problematic or worse.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="assess-bottomempty-cropped" class="level3">
<h3 class="anchored" data-anchor-id="assess-bottomempty-cropped">Assess Bottomempty Cropped</h3>
<section id="which-of-the-features-is-better-for-discriminating-between-good-and-bad-scans-1" class="level4">
<h4 class="anchored" data-anchor-id="which-of-the-features-is-better-for-discriminating-between-good-and-bad-scans-1">Which of the features is better for discriminating between good and bad scans?</h4>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-29_d09e8d1b49cce02e6efdacfd90311b34">
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-29-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-29-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Assess Bottomempty. Correlation:  0.905 Full AUC: 0.783 Cropped AUC:  0.859"</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Summary Info of Assess Bottomempty</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">firstQ</th>
<th style="text-align: right;">med</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">thirdQ</th>
<th style="text-align: right;">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Standard</td>
<td style="text-align: right;">8.516493</td>
<td style="text-align: right;">22.66947</td>
<td style="text-align: right;">27.54019</td>
<td style="text-align: right;">29.90259</td>
<td style="text-align: right;">34.63373</td>
<td style="text-align: right;">95.39375</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cropped</td>
<td style="text-align: right;">3.564558</td>
<td style="text-align: right;">10.78581</td>
<td style="text-align: right;">13.54205</td>
<td style="text-align: right;">15.28335</td>
<td style="text-align: right;">17.71191</td>
<td style="text-align: right;">84.22476</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="should-we-use-features-from-just-one-type-of-scan-or-both-1" class="level4">
<h4 class="anchored" data-anchor-id="should-we-use-features-from-just-one-type-of-scan-or-both-1">Should we use features from just one type of scan or both?</h4>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-30_ecbb6df4beee143674fc36f185527f58">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = GoodScan ~ assess_bottomempty + assess_bottomempty_cropped, 
    family = binomial(), data = full.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.6794  -0.2813   0.4084   0.6028   4.0680  

Coefficients:
                           Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                 4.57647    0.25156  18.193  &lt; 2e-16 ***
assess_bottomempty          0.09046    0.01460   6.194 5.86e-10 ***
assess_bottomempty_cropped -0.40779    0.02738 -14.895  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 2230.6  on 1849  degrees of freedom
Residual deviance: 1503.7  on 1847  degrees of freedom
AIC: 1509.7

Number of Fisher Scoring iterations: 5</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="conclusion-for-assess-bottomempty" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-for-assess-bottomempty">Conclusion for Assess Bottomempty</h4>
<p>The values for feature <code>assess_bottomempty</code> are highly correlated between the cropped and the full scan.</p>
<p>Using good and scans with only tiny problems as overall ‘good’ scans, the feature applied to cropped scans has an increased accuracy compared to the feature values from the full scan.</p>
<p>We might want to follow up on the orange colored scans:</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-31_fbd3da8d562da47e173d27ec16f287b1">
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-32_29877a4856201466cff8ebcc6845354d">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>full.data<span class="sc">$</span>LAPD_id[full.data<span class="sc">$</span>followup]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "FAU263-BA-L4" "FAU287-BC-L5" "FAU254-BD-L4" "FAU275-BC-L5" "FAU275-BD-L3"
[6] "FAU277-BA-L4" "FAU286-BA-L5"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>followupScans <span class="ot">&lt;-</span> <span class="fu">rbind</span>(followupScans, full.data[full.data<span class="sc">$</span>followup <span class="sc">==</span> <span class="cn">TRUE</span>,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="assess-col-na-cropped" class="level3">
<h3 class="anchored" data-anchor-id="assess-col-na-cropped">Assess Col NA Cropped</h3>
<section id="which-of-the-features-is-better-for-discriminating-between-good-and-bad-scans-2" class="level4">
<h4 class="anchored" data-anchor-id="which-of-the-features-is-better-for-discriminating-between-good-and-bad-scans-2">Which of the features is better for discriminating between good and bad scans?</h4>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-34_5b8534cb8256f1d7b77b841c80594994">
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-34-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-34-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Assess Col NA Correlation:  0.919 Full AUC: 0.888 Cropped AUC:  0.896"</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Summary Info of Assess Col NA</caption>
<colgroup>
<col style="width: 13%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 13%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">firstQ</th>
<th style="text-align: right;">med</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">thirdQ</th>
<th style="text-align: right;">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Standard</td>
<td style="text-align: right;">0.2573318</td>
<td style="text-align: right;">0.9244176</td>
<td style="text-align: right;">1.0755102</td>
<td style="text-align: right;">1.1654392</td>
<td style="text-align: right;">1.292844</td>
<td style="text-align: right;">4.368436</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cropped</td>
<td style="text-align: right;">0.0920783</td>
<td style="text-align: right;">0.4700281</td>
<td style="text-align: right;">0.6126759</td>
<td style="text-align: right;">0.6851693</td>
<td style="text-align: right;">0.807577</td>
<td style="text-align: right;">3.356120</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="should-we-use-features-from-just-one-type-of-scan-or-both-2" class="level4">
<h4 class="anchored" data-anchor-id="should-we-use-features-from-just-one-type-of-scan-or-both-2">Should we use features from just one type of scan or both?</h4>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-35_45bf536e66f6a29200c3af0f2aa66156">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = GoodScan ~ assess_col_na + assess_col_na_cropped, 
    family = binomial(), data = full.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-3.2254  -0.1897   0.3176   0.5365   3.6049  

Coefficients:
                      Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)             7.3581     0.3785  19.440  &lt; 2e-16 ***
assess_col_na          -2.4724     0.5155  -4.796 1.62e-06 ***
assess_col_na_cropped  -4.8233     0.6249  -7.719 1.17e-14 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 2230.6  on 1849  degrees of freedom
Residual deviance: 1308.8  on 1847  degrees of freedom
AIC: 1314.8

Number of Fisher Scoring iterations: 6</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="conclusion-for-assess-col-na" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-for-assess-col-na">Conclusion for Assess Col NA</h4>
<p>The values for feature <code>assess_col_na</code> are highly correlated between the cropped and the full scan.</p>
<p>Using good and scans with only tiny problems as overall ‘good’ scans, the feature applied to cropped scans has an increased accuracy compared to the feature values from the full scan.</p>
<p>We might want to follow up on the orange colored scans:</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-36_6075b070f7d01d4988de67c413bfff7c">
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-37_81a2d6ffa2fc28f6136096bb99bdbb96">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>full.data<span class="sc">$</span>LAPD_id[full.data<span class="sc">$</span>followup]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "FAU263-BA-L4" "FAU263-BB-L3" "FAU263-BC-L1" "FAU263-BC-L3" "FAU154-BD-L2"
[6] "FAU286-BA-L5"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>followupScans <span class="ot">&lt;-</span> <span class="fu">rbind</span>(followupScans, full.data[full.data<span class="sc">$</span>followup <span class="sc">==</span> <span class="cn">TRUE</span>,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="assess-median-na-proportion-cropped" class="level3">
<h3 class="anchored" data-anchor-id="assess-median-na-proportion-cropped">Assess Median NA Proportion Cropped</h3>
<section id="which-of-the-features-is-better-for-discriminating-between-good-and-bad-scans-3" class="level4">
<h4 class="anchored" data-anchor-id="which-of-the-features-is-better-for-discriminating-between-good-and-bad-scans-3">Which of the features is better for discriminating between good and bad scans?</h4>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-39_e5fb97801783e9abcdc37502a095a92e">
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-39-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-39-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Assess Median NA Proportion. Correlation:  0.908 Full AUC: 0.907 Cropped AUC:  0.863"</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Summary Info of Assess median NA proportion</caption>
<colgroup>
<col style="width: 13%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">firstQ</th>
<th style="text-align: right;">med</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">thirdQ</th>
<th style="text-align: right;">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Standard</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">0.0033099</td>
<td style="text-align: right;">0.0108771</td>
<td style="text-align: right;">0.0207348</td>
<td style="text-align: right;">0.0271577</td>
<td style="text-align: right;">0.2552491</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cropped</td>
<td style="text-align: right;">0.0011692</td>
<td style="text-align: right;">0.0518201</td>
<td style="text-align: right;">0.0686747</td>
<td style="text-align: right;">0.0751096</td>
<td style="text-align: right;">0.0918769</td>
<td style="text-align: right;">0.2994505</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="should-we-use-features-from-just-one-type-of-scan-or-both-3" class="level4">
<h4 class="anchored" data-anchor-id="should-we-use-features-from-just-one-type-of-scan-or-both-3">Should we use features from just one type of scan or both?</h4>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-40_7f04e075cbd55b919194bb5832416224">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = GoodScan ~ assess_median_na_proportion + assess_median_na_proportion_cropped, 
    family = binomial(), data = full.data)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.8226  -0.1079   0.3143   0.4865   5.2612  

Coefficients:
                                    Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                            4.384      0.257  17.060  &lt; 2e-16 ***
assess_median_na_proportion          -83.035      5.925 -14.014  &lt; 2e-16 ***
assess_median_na_proportion_cropped  -21.546      3.491  -6.171 6.77e-10 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 2230.6  on 1849  degrees of freedom
Residual deviance: 1219.0  on 1847  degrees of freedom
AIC: 1225

Number of Fisher Scoring iterations: 6</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="conclusion-for-assess-median-na-proportion" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-for-assess-median-na-proportion">Conclusion for Assess Median NA Proportion</h4>
<p>The values for feature <code>extract_NA</code> are highly correlated between the cropped and the full scan.</p>
<p>Using good and scans with only tiny problems as overall ‘good’ scans, the feature applied to full scans has an increased accuracy compared to the feature values from the cropped scan.</p>
<p>We might want to follow up on the orange colored scans:</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-41_c2e6593121eaf934b9729b600769f3fe">
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-42_10fc3164af8a9a48d46a478fe86dd6c7">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>full.data<span class="sc">$</span>LAPD_id[full.data<span class="sc">$</span>followup]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "FAU263-BC-L3" "FAU154-BD-L2" "FAU204-BC-L4"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>followupScans <span class="ot">&lt;-</span> <span class="fu">rbind</span>(followupScans, full.data[full.data<span class="sc">$</span>followup <span class="sc">==</span> <span class="cn">TRUE</span>,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="cropped-model-analysis" class="level2">
<h2 class="anchored" data-anchor-id="cropped-model-analysis">Cropped Model Analysis</h2>
<table class="table">
<colgroup>
<col style="width: 55%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th>Model</th>
<th>TPR</th>
<th>TNR</th>
<th>F1 Score</th>
<th>Kappa</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Crop Multinomial Logistic Regression</td>
<td>0.9821</td>
<td>0.7</td>
<td>0.9322</td>
<td>0.7375</td>
</tr>
<tr class="even">
<td>Crop Binary Logistic Regression</td>
<td>0.9554</td>
<td>0.7929</td>
<td>0.9359</td>
<td>0.7707</td>
</tr>
<tr class="odd">
<td>Crop Ordinal Random Forest</td>
<td>0.9554</td>
<td>0.8</td>
<td>0.9372</td>
<td>0.7764</td>
</tr>
<tr class="even">
<td>Crop Binary Random Forest</td>
<td>0.9375</td>
<td>0.8286</td>
<td>0.9333</td>
<td>0.7709</td>
</tr>
</tbody>
</table>
<section id="cropped-multi-nomial-logistic-regression" class="level3">
<h3 class="anchored" data-anchor-id="cropped-multi-nomial-logistic-regression">Cropped Multi-Nomial Logistic Regression</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-44_a6a1f39dc3f48f1f26cfafbb30cc9f1c">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>train.mutli <span class="ot">=</span> train</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>train.mutli<span class="sc">$</span>Quality <span class="ot">&lt;-</span> <span class="fu">factor</span>(train.mutli<span class="sc">$</span>Quality, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"Good"</span>, <span class="st">"Tiny Problems"</span>, <span class="st">"Problematic"</span>, <span class="st">"Bad"</span>, <span class="st">"Yikes"</span>), <span class="at">ordered =</span> <span class="cn">FALSE</span>)</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>train.mutli<span class="sc">$</span>Quality <span class="ot">&lt;-</span> <span class="fu">relevel</span>(train.mutli<span class="sc">$</span>Quality, <span class="at">ref =</span> <span class="st">"Good"</span>)</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>crop.multi.model <span class="ot">&lt;-</span> <span class="fu">multinom</span>(Quality <span class="sc">~</span> assess_percentile_na_proportion <span class="sc">+</span> assess_col_na_cropped <span class="sc">+</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>                         extract_na_cropped <span class="sc">+</span> assess_middle_na_proportion <span class="sc">+</span> assess_bottomempty_cropped <span class="sc">+</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>                         assess_median_na_proportion, <span class="at">data =</span> train.mutli)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># weights:  40 (28 variable)
initial  value 2278.964084 
iter  10 value 1514.996414
iter  20 value 1164.950515
iter  30 value 1097.826781
iter  40 value 1042.842997
iter  50 value 1027.678289
iter  60 value 1016.421115
iter  70 value 1012.592489
iter  80 value 1006.243573
iter  90 value 999.069566
iter 100 value 995.662593
final  value 995.662593 
stopped after 100 iterations</code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(crop.multi.model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
multinom(formula = Quality ~ assess_percentile_na_proportion + 
    assess_col_na_cropped + extract_na_cropped + assess_middle_na_proportion + 
    assess_bottomempty_cropped + assess_median_na_proportion, 
    data = train.mutli)

Coefficients:
              (Intercept) assess_percentile_na_proportion assess_col_na_cropped
Tiny Problems  -0.8748816                        150.5591              3.797753
Problematic    -5.3629710                        164.9373              6.489275
Bad            -8.2376178                        187.3876              4.993835
Yikes         -12.1271079                        186.3479              6.669425
              extract_na_cropped assess_middle_na_proportion
Tiny Problems         0.05820161                    23.98441
Problematic           0.11807948                    50.88978
Bad                   0.21449564                    42.47232
Yikes                -0.07907876                    60.68594
              assess_bottomempty_cropped assess_median_na_proportion
Tiny Problems                 -0.1697218                    150.5591
Problematic                   -0.2535929                    164.9373
Bad                           -0.1629795                    187.3876
Yikes                         -0.1085262                    186.3479

Std. Errors:
              (Intercept) assess_percentile_na_proportion assess_col_na_cropped
Tiny Problems   0.4225495                        3.301574              1.155191
Problematic     0.5727414                        2.747071              1.371982
Bad             0.6781706                        2.586306              1.462168
Yikes           1.1050427                        4.882313              1.903764
              extract_na_cropped assess_middle_na_proportion
Tiny Problems          0.0827786                    8.554083
Problematic            0.1070690                    9.791658
Bad                    0.1207308                   10.132553
Yikes                  0.2018146                    7.892080
              assess_bottomempty_cropped assess_median_na_proportion
Tiny Problems                 0.05580253                    3.301574
Problematic                   0.06268930                    2.747071
Bad                           0.06366597                    2.586306
Yikes                         0.06467393                    4.882313

Residual Deviance: 1991.325 
AIC: 2039.325 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>Predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(crop.multi.model, test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-45_737cb4b937a94ba22083ebfa5de48c30">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions[test<span class="sc">$</span>Predictions <span class="sc">==</span> <span class="st">"Good"</span>] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions[test<span class="sc">$</span>Predictions <span class="sc">==</span> <span class="st">"Tiny Problems"</span>] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>model.metrics.all <span class="ot">&lt;-</span> <span class="fu">rbind</span>(model.metrics.all, <span class="fu">numerical.Metrics</span>(test, <span class="st">"Crop Multi Logistic Reg"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   0   1
         0  82   6
         1  48 298
                                          
               Accuracy : 0.8756          
                 95% CI : (0.8408, 0.9051)
    No Information Rate : 0.7005          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.6733          
                                          
 Mcnemar's Test P-Value : 2.414e-08       
                                          
            Sensitivity : 0.9803          
            Specificity : 0.6308          
         Pos Pred Value : 0.8613          
         Neg Pred Value : 0.9318          
              Precision : 0.8613          
                 Recall : 0.9803          
                     F1 : 0.9169          
             Prevalence : 0.7005          
         Detection Rate : 0.6866          
   Detection Prevalence : 0.7972          
      Balanced Accuracy : 0.8055          
                                          
       'Positive' Class : 1               
                                          </code></pre>
</div>
</div>
</section>
<section id="cropped-numerical-logistic-regression" class="level3">
<h3 class="anchored" data-anchor-id="cropped-numerical-logistic-regression">Cropped Numerical Logistic Regression</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-46_971a20cf83b21f9172711dce4e206eaf">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>crop.num.logit.model <span class="ot">&lt;-</span> <span class="fu">glm</span>(num.Quality <span class="sc">~</span> assess_percentile_na_proportion <span class="sc">+</span> assess_col_na_cropped <span class="sc">+</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>                         extract_na_cropped <span class="sc">+</span> assess_middle_na_proportion <span class="sc">+</span> assess_bottomempty_cropped <span class="sc">+</span></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>                         assess_median_na_proportion,</span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data=</span>train, <span class="at">family=</span><span class="st">"binomial"</span>)</span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(crop.num.logit.model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = num.Quality ~ assess_percentile_na_proportion + 
    assess_col_na_cropped + extract_na_cropped + assess_middle_na_proportion + 
    assess_bottomempty_cropped + assess_median_na_proportion, 
    family = "binomial", data = train)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.8725  -0.0961   0.2832   0.4543   3.7463  

Coefficients: (1 not defined because of singularities)
                                 Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                       5.08453    0.40085  12.684  &lt; 2e-16 ***
assess_percentile_na_proportion -60.33039    8.38255  -7.197 6.15e-13 ***
assess_col_na_cropped            -2.15996    0.75895  -2.846  0.00443 ** 
extract_na_cropped               -0.07350    0.06940  -1.059  0.28958    
assess_middle_na_proportion     -15.94732    7.76027  -2.055  0.03988 *  
assess_bottomempty_cropped        0.01573    0.03805   0.413  0.67928    
assess_median_na_proportion            NA         NA      NA       NA    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1700.54  on 1415  degrees of freedom
Residual deviance:  867.54  on 1410  degrees of freedom
AIC: 879.54

Number of Fisher Scoring iterations: 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(crop.num.logit.model, test, <span class="at">type=</span><span class="st">"response"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in predict.lm(object, newdata, se.fit, scale = 1, type = if (type == :
prediction from a rank-deficient fit may be misleading</code></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># XXX Figure out followup scans</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>test[test<span class="sc">$</span>num.predictions <span class="sc">&lt;</span> <span class="fl">0.5</span> <span class="sc">&amp;</span> test<span class="sc">$</span>num.Quality <span class="sc">==</span> <span class="dv">1</span>, ]<span class="sc">$</span>followup <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>test[test<span class="sc">$</span>num.predictions <span class="sc">&gt;</span> <span class="fl">0.75</span> <span class="sc">&amp;</span> test<span class="sc">$</span>num.Quality <span class="sc">==</span> <span class="dv">0</span>, ]<span class="sc">$</span>followup <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(test, <span class="fu">aes</span>(<span class="at">x=</span>num.Quality, <span class="at">y=</span>num.predictions)) <span class="sc">+</span></span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"True Quality"</span>) <span class="sc">+</span></span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Probability of good scan"</span>) <span class="sc">+</span></span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Cropped Numerical Logistic Prediction Test Data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(test, <span class="fu">aes</span>(<span class="at">x=</span>num.Quality, <span class="at">y=</span>num.predictions, <span class="at">color=</span>followup)) <span class="sc">+</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_colour_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"grey50"</span>, <span class="st">"darkorange"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-46-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The boxplot shows a general picture of the results of the model. There is a significant number of misclassified scans. Using a typical 0.5 rounding we get the confusion matrix:</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-47_0ba71d748d98c46cca9f48b39dc0e881">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>model.metrics.all <span class="ot">&lt;-</span> <span class="fu">rbind</span>(model.metrics.all, <span class="fu">numerical.Metrics</span>(test, <span class="st">"Crop Binary Logistic Reg"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   0   1
         0  95  11
         1  35 293
                                          
               Accuracy : 0.894           
                 95% CI : (0.8612, 0.9214)
    No Information Rate : 0.7005          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.7333          
                                          
 Mcnemar's Test P-Value : 0.000696        
                                          
            Sensitivity : 0.9638          
            Specificity : 0.7308          
         Pos Pred Value : 0.8933          
         Neg Pred Value : 0.8962          
              Precision : 0.8933          
                 Recall : 0.9638          
                     F1 : 0.9272          
             Prevalence : 0.7005          
         Detection Rate : 0.6751          
   Detection Prevalence : 0.7558          
      Balanced Accuracy : 0.8473          
                                          
       'Positive' Class : 1               
                                          </code></pre>
</div>
</div>
</section>
<section id="cropped-ordinal-random-forest" class="level3">
<h3 class="anchored" data-anchor-id="cropped-ordinal-random-forest">Cropped Ordinal Random Forest</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-48_e56c61b6099398aa5b25e43418c2d75c">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>crop.ord.forest.model <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(Quality <span class="sc">~</span> assess_percentile_na_proportion <span class="sc">+</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>                                      assess_col_na_cropped <span class="sc">+</span> extract_na_cropped <span class="sc">+</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>                                      assess_middle_na_proportion <span class="sc">+</span> assess_bottomempty_cropped <span class="sc">+</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>                                      assess_median_na_proportion, <span class="at">data =</span> train,</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">importance =</span> <span class="cn">TRUE</span>)</span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>Predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(crop.ord.forest.model, test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To help compare these models, we will introduce a compression concept. Just as before, all scans will be divided into Good, which includes Good and Tiny Problems. Bad will include all other categories.</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-49_5564ff84bf3ace34fbe8fcffb5467345">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions[test<span class="sc">$</span>Predictions <span class="sc">==</span> <span class="st">"Good"</span>] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions[test<span class="sc">$</span>Predictions <span class="sc">==</span> <span class="st">"Tiny Problems"</span>] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>model.metrics.all <span class="ot">&lt;-</span> <span class="fu">rbind</span>(model.metrics.all, <span class="fu">numerical.Metrics</span>(test, <span class="st">"Crop Ord Rand For"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   0   1
         0  97  14
         1  33 290
                                          
               Accuracy : 0.8917          
                 95% CI : (0.8586, 0.9193)
    No Information Rate : 0.7005          
    P-Value [Acc &gt; NIR] : &lt; 2e-16         
                                          
                  Kappa : 0.7307          
                                          
 Mcnemar's Test P-Value : 0.00865         
                                          
            Sensitivity : 0.9539          
            Specificity : 0.7462          
         Pos Pred Value : 0.8978          
         Neg Pred Value : 0.8739          
              Precision : 0.8978          
                 Recall : 0.9539          
                     F1 : 0.9250          
             Prevalence : 0.7005          
         Detection Rate : 0.6682          
   Detection Prevalence : 0.7442          
      Balanced Accuracy : 0.8501          
                                          
       'Positive' Class : 1               
                                          </code></pre>
</div>
</div>
</section>
<section id="cropped-numerical-random-forest" class="level3">
<h3 class="anchored" data-anchor-id="cropped-numerical-random-forest">Cropped Numerical Random Forest</h3>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-50_21d260572edcf5a869e38097a6c236dd">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>crop.num.RF.model <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(num.Quality <span class="sc">~</span> assess_percentile_na_proportion <span class="sc">+</span> assess_col_na_cropped <span class="sc">+</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>                         extract_na_cropped <span class="sc">+</span> assess_middle_na_proportion <span class="sc">+</span> assess_bottomempty_cropped <span class="sc">+</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>                         assess_median_na_proportion, <span class="at">data =</span> train,</span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">importance =</span> <span class="cn">TRUE</span>)</span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>num.predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(crop.num.RF.model, test, <span class="at">type=</span><span class="st">"prob"</span>)[,<span class="dv">2</span>]</span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a>test[test<span class="sc">$</span>num.predictions <span class="sc">&lt;</span> <span class="fl">0.5</span> <span class="sc">&amp;</span> test<span class="sc">$</span>num.Quality <span class="sc">==</span> <span class="dv">1</span>, ]<span class="sc">$</span>followup <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a>test[test<span class="sc">$</span>num.predictions <span class="sc">&gt;</span> <span class="fl">0.75</span> <span class="sc">&amp;</span> test<span class="sc">$</span>num.Quality <span class="sc">==</span> <span class="dv">0</span>, ]<span class="sc">$</span>followup <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-12"><a href="#cb110-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(test, <span class="fu">aes</span>(<span class="at">x=</span>num.Quality, <span class="at">y=</span>num.predictions)) <span class="sc">+</span></span>
<span id="cb110-13"><a href="#cb110-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb110-14"><a href="#cb110-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"True Quality"</span>) <span class="sc">+</span></span>
<span id="cb110-15"><a href="#cb110-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Probability of good scan"</span>) <span class="sc">+</span></span>
<span id="cb110-16"><a href="#cb110-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Numerical Logistic Prediction Test Data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(test, <span class="fu">aes</span>(<span class="at">x=</span>num.Quality, <span class="at">y=</span>num.predictions, <span class="at">color=</span>followup)) <span class="sc">+</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_colour_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"grey50"</span>, <span class="st">"darkorange"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Model-Comparison_files/figure-html/unnamed-chunk-50-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The boxplot shows a general picture of the results of the model. There is a significant number of misclassified scans. Using a typical 0.5 rounding we get the confusion matrix:</p>
<div class="cell" data-hash="Model-Comparison_cache/html/unnamed-chunk-51_012058e6eb0bf04abf2c764d2dfa1700">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>model.metrics.all <span class="ot">&lt;-</span> <span class="fu">rbind</span>(model.metrics.all, <span class="fu">numerical.Metrics</span>(test, <span class="st">"Crop Binary Rand For"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   0   1
         0 102  20
         1  28 284
                                         
               Accuracy : 0.8894         
                 95% CI : (0.856, 0.9173)
    No Information Rate : 0.7005         
    P-Value [Acc &gt; NIR] : &lt;2e-16         
                                         
                  Kappa : 0.7317         
                                         
 Mcnemar's Test P-Value : 0.3123         
                                         
            Sensitivity : 0.9342         
            Specificity : 0.7846         
         Pos Pred Value : 0.9103         
         Neg Pred Value : 0.8361         
              Precision : 0.9103         
                 Recall : 0.9342         
                     F1 : 0.9221         
             Prevalence : 0.7005         
         Detection Rate : 0.6544         
   Detection Prevalence : 0.7189         
      Balanced Accuracy : 0.8594         
                                         
       'Positive' Class : 1              
                                         </code></pre>
</div>
</div>
</section>
<section id="cropped-model-results" class="level3">
<h3 class="anchored" data-anchor-id="cropped-model-results">Cropped Model Results</h3>
</section>
</section>
<section id="followup-scans" class="level2">
<h2 class="anchored" data-anchor-id="followup-scans">Followup Scans</h2>
<ul>
<li><span style="color: red;">XXX Probably need to do something here.</span></li>
</ul>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>